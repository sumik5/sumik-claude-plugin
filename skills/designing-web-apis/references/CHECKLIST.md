# Web API設計チェックリスト

API設計時に確認すべき項目を網羅したチェックリスト。設計レビューや開発時の品質確認に使用する。

---

## URI設計

- [ ] URIが短く入力しやすくなっているか
- [ ] URIが人間にとって読みやすく意味が理解できるか
- [ ] URIが小文字のみで構成されているか
- [ ] URIが改造しやすい（Hackable）か
- [ ] URIにサーバ側のアーキテクチャが反映されていないか（.php, cgi-bin等）
- [ ] URIのルール（命名規則、パス構造）がAPI全体で統一されているか
- [ ] URI中にスペースやパーセントエンコーディングを必要とする文字が含まれていないか
- [ ] URI中の単語はハイフンでつないでいるか（単語連結が必要な場合）

---

## HTTPメソッド

- [ ] 適切なHTTPメソッド（GET, POST, PUT, PATCH, DELETE）を使用しているか
- [ ] GETでサーバ側のデータを変更していないか
- [ ] POSTは新規作成、PUT/PATCHは更新、DELETEは削除に使用しているか

---

## リソース命名

- [ ] URIで利用する単語は、多くのAPIで同じ意味に利用されているものを選んでいるか
- [ ] URIで使われている名詞は複数形になっているか
- [ ] 変な省略形や和製英語を使用していないか
- [ ] スペルミスがないか

---

## クエリパラメータ

- [ ] ページネーションが適切に設計されているか（offset/limit or page/per_page）
- [ ] 検索パラメータの設計が適切か（q, フィールド指定等）
- [ ] パスとクエリパラメータの使い分けが適切か

---

## 認証・認可

- [ ] ログインにOAuth 2.0を利用しているか
- [ ] 適切なGrant Typeを選択しているか

---

## レスポンスデータ

- [ ] レスポンスのデフォルトデータ形式がJSONになっているか
- [ ] データ形式の指定にクエリパラメータを使う方法をサポートしているか
- [ ] 不要なJSONPに対応していないか（CORSで代替）
- [ ] レスポンスのデータ内容をクライアントから選択指定できるか（fieldsパラメータ等）
- [ ] レスポンスデータに不要なエンベロープが含まれていないか
- [ ] レスポンスデータの構造が可能なかぎりフラットか
- [ ] レスポンスのトップレベルが配列ではなくオブジェクトになっているか

---

## レスポンスデータ命名

- [ ] レスポンスのデータ名として一般的な単語を選んでいるか
- [ ] レスポンスのデータ名はなるべく少ない単語数で表現しているか
- [ ] 複数の単語を連結する場合、その方法（camelCase/snake_case）がAPI全体で統一されているか
- [ ] レスポンスのデータ名に変な省略形を使用していないか
- [ ] レスポンスのデータ名の単数形／複数形がデータの内容と一致しているか

---

## エラー処理

- [ ] エラー時のレスポンスにクライアントが原因を切り分けられる情報が含まれているか
- [ ] エラーの際にHTMLが返っていないか（常にJSON）
- [ ] 適切なステータスコードが返るようになっているか（200番台/400番台/500番台）
- [ ] メンテナンス時には503とRetry-Afterヘッダを返すようになっているか

---

## HTTP仕様活用

- [ ] 適切なメディアタイプ（Content-Type）を返しているか
- [ ] 必要な場合にCORS対応しているか
- [ ] キャッシュ関連ヘッダ（Cache-Control, ETag, Last-Modified, Vary）が適切に設定されているか
- [ ] キャッシュさせたくないデータにCache-Control: no-cacheが付いているか

---

## バージョニング

- [ ] APIがバージョンで管理されているか
- [ ] バージョン番号がセマンティックバージョニングに基づいているか
- [ ] メジャーバージョン番号がURIに含まれ、ひと目でわかるようになっているか
- [ ] APIの提供終了時の手順を考慮に入れているか
- [ ] APIの最低提供期間をドキュメントに明記しているか

---

## セキュリティ

- [ ] HTTPSでAPIを提供しているか
- [ ] JSONのエスケープをきちんと行っているか
- [ ] JSONがX-Requested-Withヘッダを認識する等、SCRIPT要素では読み込めないようになっているか
- [ ] ブラウザからアクセスするAPIではXSRFトークンを利用しているか
- [ ] APIが受け取るパラメータは不正値（マイナス値、型違い等）をチェックしているか
- [ ] リクエストの再送信でデータを二重更新しないようになっているか
- [ ] レスポンスにセキュリティ対策用の各種ヘッダ（X-Content-Type-Options, X-Frame-Options等）を付けているか

---

## レートリミット

- [ ] レートリミットによる制限を行っているか
- [ ] レートリミットの制限回数は想定ユースケースに対して適切か（少なすぎないか）
- [ ] レートリミット超過時に429ステータスコードとRetry-Afterヘッダを返しているか
- [ ] レートリミット関連情報をレスポンスヘッダで通知しているか

---

## ドキュメント・運用

- [ ] APIドキュメントがオンラインで公開されているか
- [ ] サンドボックス環境やAPIコンソールが提供されているか（公開API向け）
- [ ] SDKの提供を検討しているか（公開API向け）
- [ ] 変更履歴（CHANGELOG）が管理されているか
