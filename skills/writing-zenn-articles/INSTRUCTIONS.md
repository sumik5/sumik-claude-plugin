## 概要

Zenn CLIベースの技術記事リポジトリにおける記事作成・品質管理のワークフロースキル。記事のフロントマター仕様、命名規則、Zenn固有のMarkdown記法、画像管理、Lintチェックまでを網羅する。

---

## 記事ファイル仕様

### ファイル命名規則

- 形式: `NNN-slug-name.md`（NNN: 3桁の連番、slug: ケバブケース）
- 配置: `articles/` ディレクトリ
- 例: `001-certified-blockchain.md`, `020-claude-code-team-notification.md`

### フロントマター（必須）

```yaml
---
title: "記事タイトル"
emoji: "🎯"
type: "tech"           # "tech"（技術記事）または "idea"（アイデア）
topics: ["tag1", "tag2"]  # 英数字小文字、最大5個
published: false        # 公開状態
---
```

| フィールド | 必須 | 値 | 説明 |
|-----------|------|-----|------|
| title | ✓ | 文字列 | 記事タイトル（日本語OK） |
| emoji | ✓ | 絵文字1個 | 記事アイコン |
| type | ✓ | "tech" / "idea" | 記事種別 |
| topics | ✓ | 文字列配列 | トピックタグ（英数字小文字、**5個を目標**に埋める） |
| published | ✓ | boolean | 公開状態 |

---

## 本文の書き方

### 見出しルール

- H2（##）から開始。H1は使用しない
- 構成例: 始めに → 本題セクション群 → 終わりに
- prhルールにより「はじめに」「おわりに」はエラー。漢字表記を使うこと

### Zenn固有のMarkdown記法

```markdown
:::message
情報ブロック（注意書き、補足情報）
:::

:::message alert
警告ブロック（重要な注意事項）
:::
```

### コードブロック

- 必ず言語指定を付ける（```bash, ```json, ```typescript 等）
- ファイルパスはコードブロック直前にバッククォートで記載

### 画像管理

- 配置: `images/NNN/` ディレクトリ（NNN = 記事番号）
- 参照: `![alt text](/images/NNN/filename.png)`
- GIFアニメーションも対応

---

## ワークフロー

### Step 0: トレンド調査とタイトル設計

記事を書き始める前に、Zennのトレンドを確認してタイトルを設計する。

**トレンド確認**

WebFetchまたはブラウザで以下を確認する:

- `https://zenn.dev` トップページ（注目記事・急上昇）
- `https://zenn.dev/trending` トレンド一覧

**トレンドから読み取るポイント**

- 今週話題の技術・ツール・概念は何か
- 多くのLikeを集めているタイトルのパターン
- 読者が今困っていること・知りたいことの傾向

**タイトル設計パターン**

| パターン | 例 |
|---------|-----|
| 体験型 | 「〇〇してみた」「〇〇を導入した話」 |
| 数値型 | 「〇〇選」「N個の〇〇」「〇〇を50%削減した方法」 |
| 問題解決型 | 「〇〇で困ったときの対処法」「〇〇が動かないときに確認すること」 |
| 逆説・挑発型 | 「〇〇はもう古い」「〇〇をやめた理由」「〇〇は不要だった」 |
| How-to型 | 「〇〇入門」「〇〇の始め方」「〇〇完全ガイド」 |
| 比較型 | 「〇〇 vs △△」「〇〇から△△に移行して分かったこと」 |

**このリポジトリのタイトルパターン**

既存記事で効果が高いパターン: **問いかけ + 結果報告**

- 「〇〇、追えてますか？ △△を作った」
- 「〇〇、把握してますか？ △△させたら快適だった」
- 「〇〇、イベントごとに音を変えたら快適だった」

**タイトルのチェック**

- 具体的か（「改善しました」ではなく「通知遅延を90%削減しました」）
- 検索されそうか（読者が使いそうなキーワードが入っているか）
- クリックしたくなるか（自分がこのタイトルを見たら開くか）
- 記事の内容と一致しているか（釣りタイトルになっていないか）

### Step 0.5: topicsタグの設計

topicsは記事の発見性を大きく左右する。**5個すべて埋める**ことを目標にする。

**タグ選定の手順**

1. `https://zenn.dev/topics/{タグ名}` をWebFetchで確認し、記事数を調べる
2. 以下の戦略でタグを組み合わせる

**「大きなプール + ニッチ」戦略**

| 枠 | 目的 | 例 |
|---|---|---|
| 1-2個 | 記事の中心テーマ（必須タグ） | `claudecode`, `nextjs` |
| 1-2個 | 広い発見プール（記事数が多いタグ） | `ai`, `typescript` |
| 1-2個 | ニッチだが検索意図が一致するタグ | `ccusage`, `tmux` |

大きなプールで幅広い読者に露出しつつ、ニッチタグで検索意図がピッタリ合う読者を確実に拾う。

### Step 1: 記事番号の決定

```bash
# 既存記事の最大番号を確認
ls articles/ | sort | tail -1
# → 次の番号を使用（例: 020 → 021）
```

### Step 2: 記事ファイル作成

- `articles/NNN-slug-name.md` を作成
- フロントマターを記述（published: false で開始）
- Step 0 で決定したタイトルをフロントマターに設定

### Step 3: 本文執筆

- 既存記事のトーンに合わせた自然な日本語（です・ます調）
- 技術用語はそのまま英語
- 読者が即座に再現できる具体性
- コードは完全なものを掲載（断片ではなく）

### Step 4: 画像の追加（必要に応じて）

```bash
mkdir -p images/NNN
# 画像ファイルを配置
```

### Step 5: 品質チェック

```bash
# 対象記事のみチェック（効率的。全ファイルLintは時間がかかる）
pnpm exec textlint articles/NNN-slug-name.md
pnpm exec markdownlint-cli2 articles/NNN-slug-name.md
pnpm exec prettier --check articles/NNN-slug-name.md

# 自動修正可能なエラーを一括修正
pnpm exec textlint --fix articles/NNN-slug-name.md

# Lint全実行（最終確認用）
pnpm run lint

# プレビュー
pnpm run preview
```

### Step 6: 公開

- `published: true` に変更
- GitHubにpush（mainブランチへのマージで自動デプロイ）

---

## 品質チェックリスト

- [ ] タイトルがトレンドを意識したキャッチーなものになっている
- [ ] タイトルが具体的・検索性が高い・クリックしたくなる
- [ ] ファイル名が `NNN-slug-name.md` 形式
- [ ] フロントマターの5フィールドがすべて記入済み
- [ ] topicsが英数字小文字で5個（可能な限り全枠を使う）
- [ ] topicsに「大きなプール + ニッチ」の組み合わせが含まれている
- [ ] 見出しが##から開始
- [ ] コードブロックに言語指定あり
- [ ] 画像パスが `/images/NNN/filename` 形式
- [ ] `:::message` ブロックが正しく閉じている
- [ ] `pnpm run lint` でエラーなし
- [ ] 全角スペースが混入していない
- [ ] 技術用語の表記が統一されている
- [ ] Claude Code関連記事の場合、末尾に宣伝セクション（@CCChangelogJA）を追加済み

---

## Lint環境

このZennリポジトリは以下のLintツールを使用:

| ツール | 設定ファイル | 目的 |
|--------|------------|------|
| textlint | `.textlintrc.yml` | 日本語品質チェック |
| markdownlint-cli2 | `.markdownlint-cli2.jsonc` | Markdown形式統一 |
| Prettier | `.prettierrc.yml` | コード・Markdown整形 |
| prh | `prh/` | 表記揺れ検査 |
| cspell | `.cspell.json` | スペルチェック |

### 既知のLintルール矛盾

このリポジトリのLint設定には以下の矛盾がある。遭遇した場合の対処法を記す。

**1. prh: 長音符の循環矛盾**

`WEB+DB_PRESS.yml` と `icsmedia/prh_cho_on.yml` で一部の語彙が矛盾する。

| 語彙 | WEB+DB_PRESS | icsmedia | 結果 |
|------|-------------|----------|------|
| インジケータ/インジケーター | インジケータ | インジケーター | どちらもエラー |

**対処**: 表記自体を別の言葉に言い換えて回避する（例: 「色分け」「表示」等）。

**2. textlint: インラインコード周辺のスペース矛盾**

`ja-space-around-code`（インラインコードの前後にスペースを入れよ）と `ja-space-between-half-and-full-width`（全角と半角の間にスペースを入れるな）が競合する。

**対処**: `pnpm exec textlint --fix` を実行すると `ja-space-around-code` 側で自動修正される。この修正後は `ja-space-between-half-and-full-width` は発火しない。

**3. prh: 見出しの表記**

| NG | OK |
|----|----|
| はじめに | 始めに |
| おわりに | 終わりに |

---

## 既存記事の参考スタイル

技術記事（type: "tech"）の場合:

1. 始めに - 問題提起・動機
2. 技術解説セクション - 段階的に詳細化
3. コード全文掲載 - 断片ではなく動作する完全なコード
4. 終わりに - まとめ・今後の展望・謝辞
5. 宣伝 - @CCChangelogJA の紹介（**Claude Code関連記事のみ**）

---

## 宣伝セクション（Claude Code関連記事のみ）

記事の内容がClaude Codeに関連する場合、記事の末尾（「終わりに」セクションの後）に宣伝セクションを追加する。

**判定条件**（いずれかに該当）:

- topicsに `claudecode` または `claude` を含む
- タイトルに「Claude Code」を含む

**テンプレート**:

```markdown
## 宣伝

Claude CodeのCHANGELOGを日本語で随時ポストしているXアカウントを運用しています。アップデート情報をキャッチアップしたければぜひフォローしてください。

👉 [@CCChangelogJA](https://x.com/CCChangelogJA)
```

- 記事の最後のセクションとして配置する（「終わりに」の後）
- 文体はです・ます調を維持する
- Lintルール矛盾に注意: 「方」「かた」「ほう」は使わず言い換える

---

## 文体ルール

記事執筆時は `writing-effective-prose` スキルのAI臭チェック・文章技法を必ず適用する。

**このリポジトリの統一文体: です・ます調**

- 既存記事はすべてです・ます調で統一されている。だ・である調に変えない
- AI臭除去と文体変更は別問題。文体を維持しつつAI臭だけを除去する
- 自分の体験を交えた語り口。「〜してみました」「〜になりました」等
- 技術用語はそのまま英語

---

## 関連スキル

| スキル | 使い分け |
|--------|---------|
| `writing-effective-prose` | 記事執筆時に必ず併用。AI臭除去・論理構成・技術文書原則 |
