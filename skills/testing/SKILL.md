---
name: testing
description: Provides comprehensive testing and TDD guidance for Vitest, React Testing Library, Jest, and Playwright. Use for writing tests before implementing new features, creating reproduction tests for bug fixes, running regression tests during refactoring, and checking test coverage during code reviews. Enforces AAA pattern with actual/expected variables, prohibits nested describes, and requires Japanese test naming format. Also provides AI-generated test code review guidelines.
---

# ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

## ğŸ“‘ ç›®æ¬¡

ã“ã®ã‚¹ã‚­ãƒ«ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š

- **SKILL.md** (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«): æ¦‚è¦ã¨ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- **[VITEST-RTL-GUIDELINES.md](./VITEST-RTL-GUIDELINES.md)**: Vitest / React Testing Library ã‚³ãƒ¼ãƒ‰è¦ç´„ â­NEW
- **[TDD.md](./TDD.md)**: TDDã‚µã‚¤ã‚¯ãƒ«ã¨å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³
- **[TEST-TYPES.md](./TEST-TYPES.md)**: ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰ï¼ˆå˜ä½“ã€çµ±åˆã€E2Eï¼‰
- **[TESTABLE-DESIGN.md](./TESTABLE-DESIGN.md)**: ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªè¨­è¨ˆåŸå‰‡
- **[REFERENCE.md](./REFERENCE.md)**: ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ã‚«ãƒãƒ¬ãƒƒã‚¸ã€ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- **[AI-REVIEW-GUIDELINES.md](./AI-REVIEW-GUIDELINES.md)**: AIãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

## ğŸ¯ ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **æ–°æ©Ÿèƒ½å®Ÿè£…æ™‚ï¼ˆå®Ÿè£…å‰ã«ãƒ†ã‚¹ãƒˆä½œæˆï¼‰**
- **ãƒã‚°ä¿®æ­£æ™‚ï¼ˆå†ç¾ãƒ†ã‚¹ãƒˆä½œæˆï¼‰**
- **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ™‚ï¼ˆå›å¸°ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼‰**
- **ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ï¼ˆãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèªï¼‰**

## ğŸ“‹ åŸºæœ¬åŸå‰‡

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™º

å®Ÿè£…ã®å‰ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã€ŒTDDï¼ˆTest-Driven Developmentï¼‰ã€ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

**åŸºæœ¬ã‚µã‚¤ã‚¯ãƒ«:**
```
1. Redï¼ˆå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ãï¼‰
   â†“
2. Greenï¼ˆæœ€å°é™ã®ã‚³ãƒ¼ãƒ‰ã§é€šã™ï¼‰
   â†“
3. Refactorï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰
   â†“
ç¹°ã‚Šè¿”ã—
```

è©³ç´°ã¯ [TDD.md](./TDD.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```
        /\
       /  \      E2Eï¼ˆå°‘æ•°ï¼‰
      /____\     çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆä¸­ç¨‹åº¦ï¼‰
     /______\    å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå¤šæ•°ï¼‰
```

**åŸå‰‡:**
- å˜ä½“ãƒ†ã‚¹ãƒˆã‚’æœ€ã‚‚å¤šãä½œæˆ
- çµ±åˆãƒ†ã‚¹ãƒˆã¯é©åº¦ã«
- E2Eãƒ†ã‚¹ãƒˆã¯æœ€å°é™ã«

è©³ç´°ã¯ [TEST-TYPES.md](./TEST-TYPES.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### AAAãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå¿…é ˆï¼‰

ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã¯ **Arrange-Act-Assert** ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã„ã€**actual / expected å¤‰æ•°**ã§æ¯”è¼ƒã—ã¾ã™ï¼š

```typescript
it('æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ã®æ™‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã™ã¹ã', () => {
  // Arrangeï¼ˆæº–å‚™ï¼‰
  const userData = { name: 'John', email: 'john@example.com' }

  // Actï¼ˆå®Ÿè¡Œï¼‰
  const actual = userService.createUser(userData)

  // Assertï¼ˆæ¤œè¨¼ï¼‰
  const expected = { name: 'John', email: 'john@example.com' }
  expect(actual).toEqual(expect.objectContaining(expected))
})
```

### Vitest / RTL å¿…é ˆè¦ç´„

**è©³ç´°ã¯ [VITEST-RTL-GUIDELINES.md](./VITEST-RTL-GUIDELINES.md) ã‚’å‚ç…§ã€‚**

| è¦ç´„ | èª¬æ˜ |
|------|------|
| **æ˜ç¤ºçš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ** | `import { describe, it, expect } from 'vitest'` ã‚’å¿…ãšè¨˜è¿° |
| **æ—¥æœ¬èªãƒ†ã‚¹ãƒˆå** | ã€Œã€œã®æ™‚ã€ã€œã™ã¹ãã€å½¢å¼ã§æ¡ä»¶ã¨çµæœã‚’æ˜ç¤º |
| **ãƒã‚¹ãƒˆç¦æ­¢** | `describe` ã®ãƒã‚¹ãƒˆã¯ç¦æ­¢ã€‚ãƒ•ãƒ©ãƒƒãƒˆãªæ§‹é€ ã‚’ç¶­æŒ |
| **actual/expected** | AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ `actual` ã¨ `expected` å¤‰æ•°ã‚’ä½¿ç”¨ |
| **1ãƒ†ã‚¹ãƒˆ1æ¤œè¨¼** | ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¯”è¼ƒã§è¤‡æ•°ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’1å›ã§æ¤œè¨¼å¯ |
| **ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆåˆ¶é™** | ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLã¨a11yå±æ€§ã®æ¤œè¨¼ã®ã¿ã«ä½¿ç”¨ |

## ğŸ¯ ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

### æ¨å¥¨ã‚«ãƒãƒ¬ãƒƒã‚¸åŸºæº–

```
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯: 100%
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°: 100%
- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼: 80%ä»¥ä¸Š
- UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 70%ä»¥ä¸Š
```

è©³ç´°ã¯ [REFERENCE.md](./REFERENCE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ¨ ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªè¨­è¨ˆ

ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã‚ã®è¨­è¨ˆåŸå‰‡ï¼š

**1. ä¾å­˜æ€§æ³¨å…¥ï¼ˆDIï¼‰**
- ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã®ä¾å­˜æ³¨å…¥
- ãƒ¢ãƒƒã‚¯å¯èƒ½ãªè¨­è¨ˆ

**2. ç´”ç²‹é–¢æ•°**
- å‰¯ä½œç”¨ã®ãªã„é–¢æ•°
- åŒã˜å…¥åŠ›ã«å¯¾ã—ã¦åŒã˜å‡ºåŠ›

**3. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æŠ½è±¡åŒ–**
- å…·è±¡ã‚¯ãƒ©ã‚¹ã§ã¯ãªãã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä¾å­˜
- ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒƒã‚¯ã®ä½œæˆãŒå®¹æ˜“

è©³ç´°ã¯ [TESTABLE-DESIGN.md](./TESTABLE-DESIGN.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ¤– AIç”Ÿæˆã‚³ãƒ¼ãƒ‰ã®æ³¨æ„ç‚¹

AIãŒç”Ÿæˆã—ãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯ç¶²ç¾…çš„ã§ã™ãŒã€ä»¥ä¸‹ã®è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå¿…è¦ã§ã™ï¼š

### ä¸»è¦ãªæ³¨æ„ç‚¹

1. **ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è‚¥å¤§åŒ–**: åˆ†å²ç¶²ç¾…ãƒ»å¢ƒç•Œå€¤ã‚’å…¨éƒ¨å…¥ã‚Šã§ç”Ÿæˆ â†’ è²¬å‹™åˆ†é›¢ãƒ»å„ªå…ˆåº¦ä»˜ã‘ã§çµã‚Šè¾¼ã‚€
2. **ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼/ã‚¹ãƒˆãƒªãƒ³ã‚°**: Enum/å®šæ•°ã‚’ç„¡è¦–ã—ã¦ç›´æ›¸ã â†’ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ™‚ã®ä¿®æ­£æ¼ã‚Œã®åŸå› 
3. **Fixtureæœªä½¿ç”¨**: å„ãƒ†ã‚¹ãƒˆã§ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿é‡è¤‡ç”Ÿæˆ â†’ ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼é–¢æ•°ã§å…±é€šåŒ–
4. **è²¬å‹™æ··åœ¨**: ãƒ†ã‚¹ãƒˆå¯¾è±¡å¤–ã®ã‚±ãƒ¼ã‚¹ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ï¼‰ã¾ã§å«ã‚€ â†’ ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢
5. **é‡è¤‡ãƒ†ã‚¹ãƒˆ**: åŒã˜ä»•æ§˜ã‚’è¤‡æ•°ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ãƒ†ã‚¹ãƒˆ â†’ ãƒ¬ã‚¤ãƒ¤ãƒ¼é–“ã®é‡è¤‡æ’é™¤

**è©³ç´°ã¯ [AI-REVIEW-GUIDELINES.md](./AI-REVIEW-GUIDELINES.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚**

---

## ğŸ“Š ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### æ–°æ©Ÿèƒ½å®Ÿè£…æ™‚ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼

```
1. ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ãï¼ˆRedï¼‰
   â†“
2. æœ€å°é™ã®å®Ÿè£…ï¼ˆGreenï¼‰
   â†“
3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆRefactorï¼‰
   â†“
4. ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
   â†“
5. å®Œäº†
```

### ãƒã‚°ä¿®æ­£æ™‚ã®åŸºæœ¬ãƒ•ãƒ­ãƒ¼

```
1. ãƒã‚°ã‚’å†ç¾ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
   â†“
2. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   â†“
3. ãƒã‚°ã‚’ä¿®æ­£
   â†“
4. ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   â†“
5. å®Œäº†
```

## ğŸš€ å®Ÿè·µä¾‹

### TypeScript + Vitest

```typescript
import { describe, it, expect } from 'vitest'

describe('calculateTotal', () => {
  it('å‰²å¼•ç‡ãŒæŒ‡å®šã•ã‚ŒãŸæ™‚ã€å‰²å¼•å¾Œã®åˆè¨ˆã‚’è¿”ã™ã¹ã', () => {
    // Arrange
    const items = [100, 200]
    const discountRate = 0.1

    // Act
    const actual = calculateTotal(items, discountRate)

    // Assert
    const expected = 270 // (100 + 200) * 0.9
    expect(actual).toBe(expected)
  })
})

// å®Ÿè£…
function calculateTotal(items: number[], discount: number): number {
  const subtotal = items.reduce((sum, item) => sum + item, 0)
  return subtotal * (1 - discount)
}
```

### E2Eãƒ†ã‚¹ãƒˆï¼ˆPlaywrightï¼‰

```typescript
import { test, expect } from '@playwright/test'

test('æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã€æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¹ã', async ({ page }) => {
  // Arrange
  await page.goto('/register')

  // Act
  await page.fill('#email', 'john@example.com')
  await page.click('button[type="submit"]')

  // Assert
  await expect(page.locator('.success')).toBeVisible()
})
```

## ğŸ“‹ æœ€å°é™ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿè£…å®Œäº†å‰ã«ç¢ºèªï¼š
- [ ] vitest ã‹ã‚‰æ˜ç¤ºçš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹
- [ ] ãƒ†ã‚¹ãƒˆåã¯ã€Œã€œã®æ™‚ã€ã€œã™ã¹ãã€å½¢å¼ã‹
- [ ] AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ actual / expected ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹
- [ ] describe ãŒãƒã‚¹ãƒˆã—ã¦ã„ãªã„ã‹
- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ã‚’é”æˆã—ã¦ã„ã‚‹ã‹
- [ ] ãƒ†ã‚¹ãƒˆã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ã‹ï¼ˆé †åºä¾å­˜ãªã—ï¼‰

å®Œå…¨ãªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã¯ [REFERENCE.md](./REFERENCE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ”— é–¢é€£ã‚¹ã‚­ãƒ«

- **applying-solid-principles** - ãƒ†ã‚¹ã‚¿ãƒ–ãƒ«ãªè¨­è¨ˆåŸå‰‡
- **enforcing-type-safety** - å‹å®‰å…¨ãªãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
- **mcp-browser-auto** - E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…
- **implementing-as-tachikoma** - Developer Agentå®Ÿè£…ã‚¬ã‚¤ãƒ‰
