# オブザーバビリティ成熟度モデル（OMM）

オブザーバビリティ成熟度モデルは、進捗状況を測定し、投資対象分野に優先順位をつける計画を持つための基準となります。

---

## 成熟度モデルの必要性

### 成熟度モデルの背景

1990年代初頭、カーネギーメロン大学のソフトウェア工学研究所は、ソフトウェア開発プロジェクトに対してどれだけ効果的にデリバリーできるかに関する、さまざまなベンダーの能力を評価する方法である「ケイパビリティ成熟度モデル」を広めました。

**成熟度モデルの価値:**

- 組織の能力を評価できる
- 必要なプラクティスに目標を定められる
- 具体的で測定可能な目標を特定して定量化できる
- 長期計画を推進するのに役立つ

**成熟度モデルの限界:**

- ソフトウェアエンジニアリングチームのパフォーマンスレベルには上限がない
- プラクティスは進化し、継続的に改善される最新技術である
- 最終状態は、モデルが作成されたときに知られていたことだけを反映した静的スナップショットでしかない
- 目標が変わったり、優先順位が変わったり、より良いアプローチが発見されたりする
- それぞれのアプローチは個々の組織に固有のものであり、普遍的に採点できるものでもない

**重要な認識:**

すべての組織に適用できる万能のモデルはありません。成熟度モデルは、自分たちのニーズと望ましい結果を批判的かつ体系的に検討し、自分たちに適したアプローチを構築するための出発点として有用です。

### なぜオブザーバビリティに成熟度モデルが必要なのか

**ソフトウェア開発と運用における課題:**

- エンジニアリングチームを生産性の高い状態に導くプラクティスは、形式化したり文書化したりされることが、ほとんどなかった
- 企業文化特有の歴史に基づき、シニアエンジニアからジュニアエンジニアへ非公式に伝えられることが多い
- 組織的な知識の共有が、ある種のエンジニアリング哲学の系統や習慣の集まりを生み出す

**本番環境の社会技術的課題:**

オブザーバビリティのためのツールは、ソフトウェアシステムにおける技術的な課題を解決できますが、技術以外の要素も考慮する必要があります。オブザーバビリティ成熟度モデルは、エンジニアリング組織のコンテキスト、制約、および目標を考慮します。

**OMM（オブザーバビリティ成熟度モデル）の特徴:**

- 組織の経歴や使用しているツールに限定されない
- 特定のソフトウェアソリューションや技術的な実装の詳細については言及しない
- 人間の言葉で、この旅のコストと利点に焦点を当てる
- 「この分野が苦手かどうか、どうやって知ることができますか？」といった質問に答える

**調査から得られた知見:**

オブザーバビリティを採用していないチームと比較して、オブザーバビリティを導入しているチームは:

- 本番環境でのソフトウェアの品質を確保する能力に自信を持っている可能性が**3倍高い**
- 新機能のリリースにつながらない作業に費やす時間が**半分以下**

これらのパターンは、今日の現代的で複雑な社会技術システムの創発特性です。オブザーバビリティのプラクティスを採用することで、個人の「より良いコードを書けばいい」では解決できないような問題の解決策を、チームが見いだせるようになるのです。

---

## オブザーバビリティ成熟度モデルについて

### エンジニアリング組織の目標

**目標1: 持続可能なシステムとエンジニアの生活の質（QOL）**

エンジニアのQOLとシステムの持続可能性は密接に結びついています。

- オブザーバビリティが確保されたシステムは、所有しやすく、維持しやすいものになる
- エンジニアのQOLは向上する
- トイルを削減し、チームメンバーの定着率を高める
- 新しいエンジニアの発掘とトレーニングに費やす時間と費用を削減する

**目標2: 顧客満足度の向上によるビジネスニーズへの対応**

オブザーバビリティによって、エンジニアリングチームは開発するサービスと顧客の関係をより良く理解できます。

- エンジニアは顧客のニーズを把握できる
- 顧客に喜ばれるパフォーマンス、安定性、機能を提供できる
- オブザーバビリティはビジネスを成功させるために必要なもの

### OMM（オブザーバビリティ成熟度モデル）の特性

**社会技術的な問題として捉える:**

オブザーバビリティの議論は、計装、ストレージ、クエリーなどの技術的なことにのみ注目され、チームで何を可能にするかには焦点が当てられないことがあまりにも頻繁に起こっています。

| 側面 | 重要性 |
|------|--------|
| **技術的側面** | ツールの品質、計装のしやすさ、データの粒度、任意の質問に答えられるか |
| **社会的側面** | メンバーが問題解決のためにツールを使うことに不安を感じないか |

もし、メンバーが問題解決のためにツールを使うことに不安を感じたら、成果を上げることはできません。

**重要な原則:**

- **これらのことを行うのに、唯一の方法や正しい順序、規定された方法はありません**
- すべての組織は、さまざまある潜在的な旅に向き合う
- 各ステップでは、何を達成したいのかに着目する
- それを後ではなく今すぐ行うことで、適切なビジネス上のインパクトを得られることを確認する

**継続的な改善:**

ケイパビリティの構築は、決して「完了」することのない追求であることを理解することが重要です。継続的な改善の余地が常にあります。

組織的マッスルメモリーが存在するようになり、文化の一部として組織的にサポートされるようになれば、成熟度の高いレベルに到達したことを示す良い指標になります。

---

## 5つのケイパビリティ

### ケイパビリティ1: システム障害にレジリエンスで対応する

**レジリエンス:** あるチームが、サポートするシステムを使いながらサービスを復旧し、ユーザーへの影響を最小限に抑えることを可能にする適応能力のこと。

レジリエンスは、孤立したオペレーションチームの能力や、ソフトウェアにおける堅牢性や耐障害性のみを指すのではありません。緊急対応プロセスの成熟度を測るために、技術的な成果と社会的な成果の両方を測定しなければなりません。

#### 技術的な成果の測定

| メトリクス | エリートパフォーマー | ローパフォーマー |
|----------|---------------------|----------------|
| **MTTR** | 1時間未満 | 1週間〜1ヶ月 |

**測定すべき3つの領域:**

1. 問題を検出するのにかかる時間
2. 問題を軽減するのにかかる時間
3. 何が起こったかを完全に理解しリスクに対処するのにかかる時間

#### 社会的な成果の測定

**チームマネージャーが注目すべきディメンション:**

- オンコールのローテーションはチームにとって持続可能で、スタッフは常に注意を払い、仕事に没頭し、その状態を維持できているか
- 本番環境の責任者全員を教育し、秩序ある安全な方法で参加させるための体系的な計画があるか
- 多くの人を待機させたりコンテキストスイッチをさせる必要がないか
- エンジニアの時間の大半が障害や復旧などのトイルに費やされていないか

#### チームが上手くいっている場合

- ✅ システムの稼働率はビジネス目標を満たし、向上している
- ✅ アラートに対するオンコール対応が効率的であり、アラートを無視することがない
- ✅ オンコール対応に過度なストレスがなく、エンジニアは必要に応じてシフトを増やすことをためらわない
- ✅ インシデントが発生した場合にも、超過勤務や過度なストレスを感じることなく対応できる

#### チームが上手くいっていない場合

- ❌ オンコールのローテーションに多くの時間と費用を費やしている
- ❌ インシデントが頻繁に発生し、長期化している
- ❌ オンコール担当者がアラート疲れに悩まされる、もしくは、実際の障害があるのにアラートが起こらない
- ❌ インシデント対応者が問題を簡単に診断できない
- ❌ 一部のチームメンバーが、緊急事態に不当に巻き込まれる

#### オブザーバビリティとの関連性

- アラートは要を得ており、焦点の絞られた、アクション可能なもの（アラート疲れを軽減）
- エラーバジェットと顧客ニーズの間には明確な関係が存在
- コンテキストに富んだイベントによって、発生時に効果的なトラブルシューティングを行える
- カーディナリティの高いデータを掘り下げ、その場で素早く結果を集計できるため、エラーの元をピンポイントで特定し、インシデントを迅速に解決できる
- トラブルシューティング技術の民主化によって、過去の調査を簡単に共有して、インシデント解決のスキルをチーム全体に分散できる

---

### ケイパビリティ2: 高品質なコードをデリバリーする

**高品質なコード:** どれだけよく理解され維持されているか、もしくは、無菌室環境（CIテストスイートなど）でどれだけ頻繁にバグが発見されるかで測られます。

コードの可読性や従来の検証技術は有用ですが、そのような技術では、本番環境特有の混沌とした状況下でコードが実際にどのように動作するかを検証することはできません。コードの品質とは、顧客やビジネスにとって重要な動作と拡張性を検証することによって測定する必要があります。

#### チームが上手くいっている場合

- ✅ コードが安定し、本番環境で発見されるバグが少なく、障害も少ない
- ✅ コードが本番環境にデプロイされた後、チームはサポートではなく、顧客ソリューションに集中できる
- ✅ エンジニアは、開発中のコード作成から、本番環境でのトラブルシューティングまで、あらゆる段階で問題を直感的にデバッグできる
- ✅ 分離した問題が発生しても、たいてい、障害が連鎖することなく修正できる

#### チームが上手くいっていない場合

- ❌ カスタマーサポートのコストが高い
- ❌ エンジニアリングの時間のうち、新機能の開発ではなく、バグフィックスに費やされる割合が高い
- ❌ チームメンバーは、リスクを認識しており、新機能のデプロイに消極的になりがちになる
- ❌ 問題を特定し、障害事例を再現する方法を構築し、修復するのに長い時間がかかる
- ❌ 開発者は、デリバリー後のコードの信頼性について、確信が低い

#### オブザーバビリティとの関連性

- モニタリングと追跡が十分に行われたコードであれば、いつ、どのようにプロセスが失敗しているかを簡単に確認でき、脆弱な部分の特定と修正も容易
- 高品質のオブザーバビリティにより、1台のマシン上と1万台のマシン上のコードを同じツールでデバッグできる
- 高度に関連付けられ、コンテキストに富んだテレメトリーにより、エンジニアはデプロイ中にコードが動作している様子を観察し、迅速にアラートを出し、ユーザーが気づく前に問題を解決できる
- バグが発生した場合、それが修正されているかどうかを確認するのも簡単

---

### ケイパビリティ3: 複雑さと技術的負債に立ち向かう

**技術的負債:** 必ずしも悪いことではありません。エンジニアの組織は常に、短期的な利益と長期的な成果との間の選択に直面しています。

負債に対処したり、その選択のマイナス面を軽減するような具体的な計画が存在していれば、短期的な勝利が正しい判断になることもあります。管理されていない場合は、メンテナンスが高価になり、将来の更新がコストに依存するようになるため、長期的なコストがさらに増加します。

#### チームが上手くいっている場合

- ✅ エンジニアは、コアとなるビジネス目標を前進させることに大半の時間を費やす
- ✅ バグフィックスやその他のリアクティブな作業は、チームの時間のごく一部を占めるに過ぎない
- ✅ エンジニアは、コードベースのどこに変更を加えればいいのか、迷ったり、探したりする時間はほとんど必要としない

#### チームが上手くいっていない場合

- ❌ スケーリングが限界に達したときや、エッジケースにぶつかったときに、エンジニアリングの時間が無駄になる
- ❌ チームは、間違ったものを修正したり、間違った修正方法を選んだりして、散漫になる
- ❌ 局所的な変更から制御不能な波及効果が頻繁に発生する
- ❌ コードに変更を加えることを恐れる、いわゆる「お化け屋敷効果」が起こる

#### オブザーバビリティとの関連性

- オブザーバビリティによって、チームはシステムのエンドツーエンドのパフォーマンスを理解し、障害やレスポンスの遅延を無駄なくデバッグできる
- トラブルシューティングの担当者は、システムの未知の部分を探索する際に、正しいパンくずを見つけられる
- ふるまいのトレースが簡単にできるようになる
- エンジニアは、システムのどこを最適化すべきか、適当に推測するのではなく、適切な部分を特定し、パフォーマンスのボトルネックを見つけるために、コードを変更できる

---

### ケイパビリティ4: 予測可能なケイデンスでリリースする

ソフトウェア開発の価値は、新機能や最適化がリリースされた後に初めてユーザーに届きます。すべてのビジネスは、顧客の要求を満たして市場での競争力を維持するために、予測可能で安定した、頻繁な**リリースケイデンス**を必要としています。

CI/CDのツールやプロセスは、堅牢なリリースサイクルを開発するために必要な基本構成要素に過ぎません。

#### チームが上手くいっている場合

- ✅ リリースサイクルはビジネスニーズと顧客の期待にマッチしている
- ✅ コードは書かれた後、すぐに本番環境に投入される
- ✅ エンジニアは、自分のコードがピアレビューを受け、コントロールを満たし、チェックインされた後、デプロイを動作させられる
- ✅ コードパスはデプロイを必要とせず、即座に有効化または無効化できる
- ✅ デプロイとロールバックが素早く行える

#### チームが上手くいっていない場合

- ❌ リリースの頻度が少なく、多くの人の介在が必要になる
- ❌ 一度に多くの変更が行われる
- ❌ リリースを特定の順序で行わなければならない
- ❌ セールスチームは、特定のリリーストレインに基づいて、顧客との約束をコントロールしなければならない
- ❌ チームは特定の日や時期にデプロイすることを避けている

#### オブザーバビリティとの関連性

- オブザーバビリティは、本番環境だけでなく、ビルドパイプラインを理解する方法でもある
- テストにおけるパフォーマンスの低下や、ビルドとリリースのプロセスにおけるエラーを発見できる
- 計装は、ビルドがうまくいっているかどうか、追加した機能が期待通りに動作しているかどうか、何かおかしな点がないかを知ることができる
- エラーを再現するために必要なコンテキストを収集できる
- 適切に計装されていれば、新旧のビルドIDで分解し、並べて検証できる
- デプロイ間で一貫したスムーズな本番環境を検証できる
- 新しいコードが意図した通りの効果を発揮しているかどうか、何か不審な点がないかどうかを確認できる

---

### ケイパビリティ5: ユーザーのふるまいを理解する

プロダクトマネジメント、プロダクトエンジニア、システムエンジニアは皆、自分たちのソフトウェアがユーザーに与える影響を理解する必要があります。そうすることで、プロダクトマーケットフィットを実現でき、また、エンジニアとして目的やインパクトを感じられるのです。

#### チームが上手くいっている場合

- ✅ 開発者は、顧客成果やシステム利用率とコストに関する重要業績評価指標（KPI）に簡単にアクセスし、それらを並べて可視化できる
- ✅ 機能フラグなどの手法を使って、本格的なリリースの前に、少数のユーザーに対する試行を素早く繰り返せる
- ✅ プロダクトマネジメントは、顧客のフィードバックや行動を把握できる
- ✅ プロダクトマーケットフィットの実現が容易になる

#### チームが上手くいっていない場合

- ❌ プロダクトマネージャーは、次に何を作るべきかについて適切な判断を下すための十分なデータを持っていない
- ❌ 開発者は、自分たちの仕事にインパクトがないと感じている
- ❌ 本番環境が大きくなりすぎて、委員会方式で設計していたり、サイクルの後半になるまで顧客からのフィードバックがない
- ❌ プロダクトマーケットフィットが実現しない

#### オブザーバビリティとの関連性

- 効果的なプロダクトマネジメントを行うには、関連するデータにアクセスする必要がある
- オブザーバビリティとは、必要なデータを生成し、チームは自由な質問をして、リリースサイクルを繰り返せるようになること
- イベント駆動データの分析を使った可視性のレベルと予測可能なリリースサイクル、それらの両方をオブザーバビリティによって実現する
- プロダクトマネージャーは、自分たちの変更がビジネス目標にどれだけ合致しているかを正しく理解し、機能の方向性を調査し、サイクルを繰り返すことができる

---

## OMMの活用方法

### あなたの組織でOMMを使う

**OMMの役割:**

OMMは、オブザーバビリティを効果的に活用するときに有効な、組織の能力を見直すためのツールです。このモデルは、あなたのチームのケイパビリティがどこに欠けていて、どこに優れているかを測定するための出発点となります。

**優先順位付けの重要性:**

あなたの組織がオブザーバビリティの文化を採用して普及させるための計画を作成する場合、ビジネスの最終損益に最も直接的に影響を与え、パフォーマンスを向上させるケイパビリティに優先順位をつけることが有効です。

**重要な認識:**

- 成熟したオブザーバビリティの実践は直線的なものではない
- これらのケイパビリティは自然界には存在しない
- オブザーバビリティは、それぞれのケイパビリティと密接に関係しており、あるケイパビリティを改善することで、他のケイパビリティの結果に貢献することもある
- このプロセスの展開方法は、各組織のニーズによって異なり、どこから始めるべきかは現在の専門分野によって異なる

### ワードリーマッピング

**ワードリーマッピング:** 現在の組織の能力に関して、これらのケイパビリティの優先順位と相互依存性の関係を把握するのに役立つテクニックです。

どのケイパビリティがビジネスにとって最も重要かを理解することで、オブザーバビリティ導入の旅を進めるために必要なステップの優先順位を付けたり、障害を取り除いたりできます。

### オーナーシップと説明責任

各ケイパビリティのレビューと優先順位付けを行う際に、チーム内でこの変化を推進する責任を負う、明確なオーナーを特定する必要があります。

**必要な要素:**

- オーナーシップ
- 説明責任
- 資金と時間に関する組織的支援

経営層からの組織的支援なしでも、チームは自分たちのサイロの中で少しずつ改善できるかもしれません。しかし、これらのケイパビリティを組織全体で発揮できず、一部のキーパーソンに依存しているようでは、その人たちがどんなに高度で優秀であっても、成熟したハイパフォーマンスの状態には到達できません。

---

## まとめ

オブザーバビリティ成熟度モデルは、あなたの組織が必要とするアウトカムを測定し、独自のカスタマイズされた導入パスを作成するための基準となります。

**オブザーバビリティの実践を成熟させたハイパフォーマーチームの主要なケイパビリティ:**

| ケイパビリティ | 測定軸 |
|------------|--------|
| **レジリエンス** | システム障害に対して、レジリエンスをもって対応できるか |
| **コード品質** | どれだけ簡単に、高品質のコードを提供できるか |
| **技術的負債管理** | どれだけうまく、複雑さと技術的負債を管理できるか |
| **リリースケイデンス** | どれだけ予測可能に、ソフトウェアリリースケイデンスを持っているか |
| **ユーザー理解** | どれだけしっかりと、ユーザーの行動を理解できるか |

**重要なポイント:**

- OMMは、定性的な傾向と定量的な分析を統合したもの
- 成熟度モデルは業界全体に適用できるよう十分に一般化した理想的な未来の姿の、静的なスナップショット
- 成熟度モデル自体、オブザーバビリティの採用が広まるにつれて進化していく
- オブザーバビリティのプラクティスも進化し、成熟に向かう道筋は、あなたの組織に固有のものになるはず

成熟度モデルは、あなたの組織に適した実用的なアプローチの基礎となります。

---

## ユーザー確認の原則（AskUserQuestion）

以下の状況では、AskUserQuestionツールを使用してユーザーに確認してください:

| 確認が必要な場合 | 質問例 |
|---------------|--------|
| **ケイパビリティの優先順位** | 「5つのケイパビリティのうち、どれを最優先で改善しますか？」 |
| **現在の成熟度評価** | 「各ケイパビリティについて、現在の組織の状態を評価してください」 |
| **目標設定** | 「どのケイパビリティをどのレベルまで引き上げることを目標としますか？」 |
| **リソース配分** | 「各ケイパビリティの改善にどの程度のリソース（時間・予算）を割り当てますか？」 |
