# テスト工程・品質管理リファレンス

ソフトウエア品質特性（ISO 25010）をベースに、テスト工程の基本フロー、
テスト計画・設計・実行・管理の実務ノウハウ、そしてアンチパターン集をまとめる。

## 目次

- [ソフトウエア品質特性](#ソフトウエア品質特性)
- [テスト工程の基本フロー](#テスト工程の基本フロー)
- [テスト計画](#テスト計画)
- [テスト設計](#テスト設計)
- [テスト実行と管理](#テスト実行と管理)
- [不具合管理](#不具合管理)
- [テストのアンチパターン集](#テストのアンチパターン集)

---

## ソフトウエア品質特性

### ISO/IEC 25010 の8分類

「品質」は曖昧な概念になりがちだが、国際規格で8つの品質特性に分類することで、具体的に整理・議論できるようになる。

| # | 品質特性 | 定義 | テスト観点の例 |
|---|---------|------|--------------|
| 1 | **機能適合性** | 必要な機能が過不足なく備わっているか | 機能テスト、受入テスト |
| 2 | **性能効率性** | 応答時間・スループットが適切か | 性能テスト、負荷テスト |
| 3 | **互換性** | 異なる環境でも同様に利用できるか | ブラウザ互換性テスト、OS互換テスト |
| 4 | **使用性** | 利用者がスムーズに操作できるか | ユーザビリティテスト、アクセシビリティテスト |
| 5 | **信頼性** | 計算やデータ処理が正確か、障害が起こらないか | 異常系テスト、耐障害テスト |
| 6 | **セキュリティ** | 情報流出や不正利用がないか | 脆弱性スキャン、ペネトレーションテスト |
| 7 | **保守性** | 原因特定と修正を迅速に行えるか | コードカバレッジ計測、静的解析 |
| 8 | **移植性** | 新環境への対応が容易か | マイグレーションテスト |

### 品質特性の活用方法

**ステップ1: 要求の収集**
関係者から「達成したいこと」「気になる点」を自由に出してもらう。品質特性のカテゴリは事前に示さない（バランスよく意見が出てしまい、優先順位付けの目的を果たせないため）。

**ステップ2: 8観点での分類**
出された意見を8つの品質特性に分類・整理する。

**ステップ3: 優先順位の可視化**
レーダーチャートなどで品質特性間の相対的な優先度を可視化する。開発中の判断基準として活用する。

```
例: ECサイトの品質優先度
  機能適合性: ★★★★★（商品検索・購入が正しく動く）
  性能効率性: ★★★★☆（応答時間3秒以内）
  互換性:     ★★★★☆（主要スマホ機種対応）
  使用性:     ★★★☆☆（初心者でも購入可能）
  信頼性:     ★★★★★（金額計算の正確性）
  セキュリティ: ★★★★★（個人情報・決済情報の保護）
  保守性:     ★★★☆☆（障害時の迅速な原因特定）
  移植性:     ★★☆☆☆（新OS対応）
```

### 品質トライアングル

品質向上は以下の3つの視点を繰り返して達成する:

1. **正しいモノを作る** - 必要な機能を過不足なく作る（要件定義・設計フェーズ）
2. **正しくモノを作る** - 開発プロセスに従い途中成果物を確認しながら作る
3. **正しいモノか確認する** - テストで要求通りに出来上がっているかを確認する

---

## テスト工程の基本フロー

### 4つの工程

```
テスト計画 → テスト設計 → テスト実行
                ↑                ↑
            テスト管理（各工程を横断して進捗・品質を監視）
```

### 工程間のインプット・アウトプット

| 工程 | インプット | アウトプット |
|------|----------|------------|
| テスト計画 | プロジェクト計画書、要件定義書、システム仕様書 | テスト計画書 |
| テスト設計 | テスト計画書、システム関連ドキュメント | テスト設計方針、テストケース |
| テスト実行 | テスト計画書、テストケース | テスト実行結果、不具合チケット |
| テスト管理 | 各工程のアウトプット | 品質評価レポート、改善提案 |

先行する工程のアウトプットが後続工程のインプットになる。ドキュメント作成を怠ると、工程間で情報が伝わらず、抜け漏れが生じる。

---

## テスト計画

### テスト計画で決める6つの事項

| # | 作業 | 内容 |
|---|------|------|
| 1 | テスト対象の決定 | どの機能をテストし、どの機能をテストしないかを決める |
| 2 | テストのやり方の決定 | テストレベル（単体/結合/システム/受入）、テスト種別（機能/性能/セキュリティ等）を決める |
| 3 | 役割分担の決定 | 誰がどのテストを担当するかを決める |
| 4 | 準備対象の洗い出し | テスト環境、テストツール、テストデータなど事前準備が必要なものを洗い出す |
| 5 | スケジュールの決定 | 各作業の実施期間と順序を決める |
| 6 | 管理方針の決定 | 進捗記録方法、不具合共有ルール、エスカレーション基準を決める |

### テスト計画書の2種類

| 種類 | 対象読者 | 内容 |
|------|---------|------|
| マスターテスト計画書 | 経営層、プロジェクト外部関係者 | プロジェクト全体のテスト計画 |
| 個別テスト計画書 | テスト担当メンバー | テストレベルごとの詳細計画（単体テスト計画書、結合テスト計画書等） |

### 完了基準（Exit Criteria）

テスト完了の判断基準を事前に定義する:

```
完了基準の例:
- テストケース消化率: 100%
- 重大度「高」以上の未修正バグ: 0件
- 重大度「中」の未修正バグ: 3件以下
- テスト実行結果の合格率: 95%以上
- パフォーマンス基準: 応答時間3秒以内（P95）
```

---

## テスト設計

### テスト設計の3ステップ

**1. インプット情報の入手と確認**

要件定義書やシステム仕様書だけでなく、以下も収集する:
- 開発中に検出された不具合情報
- 仕様変更の履歴
- 類似システムの不具合情報
- 開発者への問い合わせ一覧

**2. テスト設計方針の決定**

テストケースを作る前に、何を確認したいかの方針を立てる:

```
テスト設計方針の例:
- 「個々の画面項目が仕様通りに動作すること」を確認する
- 「送料計算が正しく行われること」を確認する
- 「権限のないユーザーが操作できないこと」を確認する
```

設計方針は関係者間で共有する。開発者の意見（「この部分は複雑なので重点テストすべき」等）も取り込む。

**3. テストケースの作成**

テストケースには以下を記述する:
- テスト条件（前提条件）
- 入力するデータ
- 実施手順
- 期待値（期待する結果）
- 優先度

### テストケースの優先度付け

| 優先度 | 基準 | 例 |
|--------|------|-----|
| 最高 | ビジネスクリティカルなパス | ログイン、決済、データ保存 |
| 高 | 頻繁に使われる機能 | 検索、一覧表示、フォーム送信 |
| 中 | 通常の業務フロー | 設定変更、プロフィール更新 |
| 低 | まれにしか使われない機能 | エクスポート、特殊な設定 |

### テスト条件の洗い出しアプローチ

```
1. 機能ベース: 仕様書の各機能からテスト観点を導出
2. リスクベース: バグが潜みやすい箇所を重点的にテスト
3. ユーザーストーリーベース: ユーザーの利用シナリオからテストを導出
4. 品質特性ベース: 8つの品質特性それぞれの観点でテストを設計
```

---

## テスト実行と管理

### テスト実行の6つの作業

| # | 作業 | 内容 |
|---|------|------|
| 1 | テスト環境の準備 | テスト対象システムのセットアップ |
| 2 | テストデータの準備 | テストケースの前提条件に合致するデータを用意 |
| 3 | 実行手順の確認 | 1回の操作で複数テストケースをカバーできるか整理 |
| 4 | ツールの準備 | テスト自動化ツール、レポートツールのセットアップ |
| 5 | 実行スケジュールの作成 | 重要な機能から先にテストするよう順序を決定 |
| 6 | 実行 | テストケースに従い操作し、結果を記録 |

### テスト進捗の追跡

```
追跡すべき指標:
- テストケース消化率（日次）
- 不具合検出件数（累計・日次）
- 不具合修正完了件数
- 未消化テストケース数
- ブロッキング不具合の件数（テスト続行不能な不具合）
```

進捗が計画から乖離した場合は、原因を分析し対策を講じる:
- テスト環境の不備 → 環境復旧の優先度を上げる
- ブロッキングバグ → 開発チームへの緊急修正依頼
- テストケースの見積もり誤差 → スケジュール再調整

---

## 不具合管理

### 不具合チケットの記載項目

| 項目 | 内容 |
|------|------|
| タイトル | 不具合の概要を端的に記述 |
| 重大度 | 致命的 / 高 / 中 / 低 |
| 再現手順 | 不具合を再現するための手順を具体的に記述 |
| 期待結果 | 本来どう動作すべきか |
| 実際の結果 | 実際に観測された動作 |
| 環境情報 | OS、ブラウザ、バージョン等 |
| スクリーンショット/動画 | 不具合の証拠となる視覚情報 |
| 関連テストケース | どのテストケースで発見されたか |

### 不具合報告のポイント

- **事実に焦点を当てる**: 主観ではなく客観的な事実を記述
- **再現性を明確に**: 毎回再現するのか、特定条件でのみ再現するのか
- **1チケット1不具合**: 複数の不具合を1チケットにまとめない
- **開発者への配慮**: 問題発見のポジティブな面を強調し、協力姿勢を示す

---

## テストのアンチパターン集

### 1. 生産性が低いテスト

**症状**: テストケースが大量にあるのにバグが見つからない、テスト工数だけが膨らむ

**原因と対策**:
- テスト観点が表面的（画面項目の有無だけチェック） → リスクベースでテスト観点を深掘りする
- テストケースの優先順位がない → ビジネスインパクトで優先度を付ける
- 同じ観点のテストを重複して作成 → テスト設計方針でカバレッジを管理する

### 2. 中身のないテスト計画書

**症状**: テスト計画書は存在するがテンプレートを埋めただけで、実態に合っていない

**原因と対策**:
- 計画書が形式的に作成されている → プロジェクト固有のリスクや制約を反映させる
- 完了基準が曖昧（「品質が確認できたら」） → 定量的な完了基準を設定する
- 計画書が更新されない → 状況変化に応じて計画書を更新する運用ルールを定める

### 3. 場当たり的なテスト設計

**症状**: テスト設計を飛ばしていきなりテストケースを書き始める

**原因と対策**:
- 時間がないと感じている → テスト設計方針の決定は30分でもやる
- インプット情報が不十分 → 開発者に積極的にヒアリングする
- テストケースの妥当性を判断できない → 設計方針とテストケースの対応を明示する

### 4. テスト以前の問題

**症状**: テスト環境が準備できない、テストデータがない、仕様書がない

**原因と対策**:
- 準備作業の見積もりが甘い → テスト計画で準備対象を洗い出す
- 開発側との連携不足 → テスト計画段階から開発チームを巻き込む
- 仕様が曖昧 → テスト設計を通じて仕様の不備を早期発見する

### 5. テスト自動化の失敗

**症状**: 自動テストを導入したが、メンテナンスコストが手動テスト以上になる

**原因と対策**:
- 全テストケースを自動化しようとする → 自動化に向いているテストを選別する
- テストコードの設計が悪い → ページオブジェクトパターン等の設計手法を採用
- CIに組み込まれていない → 導入初期からCIパイプラインに統合する
- Flaky Testを放置する → 不安定なテストは即座に修正または無効化する

### 6. やみくもなテスト

**症状**: テストの目的やスコープが不明確なまま、思いつくままにテストする

**原因と対策**:
- テスト対象の品質特性が整理されていない → 8つの品質特性で優先順位を付ける
- 何を見つけたいのかが不明確 → テスト分析で「見つけたいバグ」を定義する
- テストレベルの使い分けができていない → ピラミッドモデルでテストを配置する

---

## テストエンジニアの役割

### 3つの基本役割

| 役割 | 責務 | 求められる能力 |
|------|------|--------------|
| テスト実行者 | テストケースに従いテストを実施し、結果を記録・報告 | 正確性、速度、記録の丁寧さ |
| テスト設計者 | テストケースの設計と実施手順の検討 | 分析力、仕様理解力、テスト技法の知識 |
| テスト管理者 | チームマネジメント、進捗管理、リスク報告 | マネジメント力、テスト全般の知識と経験 |

### テストエンジニアに共通して必要な2つの能力

**1. 批判的姿勢**
物事を常に疑って捉える姿勢。開発者が積極的に課題を解決するのに対し、テストエンジニアは一歩引いた視点から不具合や仕様との不一致を見つける。

**2. コミュニケーション能力**
- **事実を伝える能力**: 状況を正確に把握し、簡潔明確に報告する
- **相手を意識して伝える能力**: 開発者、マネージャーなど、相手が必要とする情報を的確に届ける
- **配慮**: 事実に焦点を当て、問題発見のポジティブな面を強調する

---

## 関連ファイル

- **[INSTRUCTIONS.md](../INSTRUCTIONS.md)** - スキル概要
- **[DEVELOPER-TESTING.md](./DEVELOPER-TESTING.md)** - 開発者テスト技法
- **[TEST-AUTOMATION-STRATEGY.md](./TEST-AUTOMATION-STRATEGY.md)** - テスト自動化戦略
- **[MOCK-PATTERNS.md](./MOCK-PATTERNS.md)** - モックパターン集
- **[TESTABLE-DESIGN.md](./TESTABLE-DESIGN.md)** - テスタブルな設計
