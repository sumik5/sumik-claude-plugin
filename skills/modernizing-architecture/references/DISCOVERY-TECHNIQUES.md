# 発見テクニック（Discovery Techniques）

ドメインの全体像をマッピングし、問題・機会を発見するための手法群。Wardley Mapping、EventStorming、Domain Storytellingを中心にカバーする。

---

## 1. Wardley Mapping

ビジネス戦略をバリューチェーンと進化の軸で可視化する手法。

### Strategy Cycle

```
Purpose（目的）→ Landscape（地形）→ Climate（環境要因）→ Doctrine（原則）→ Leadership（決断）
                                    ↑                                              │
                                    └──────────────────────────────────────────────┘
```

### マップの作成手順

1. **ユーザーニーズ**を最上部に配置
2. ニーズを満たす**コンポーネント**をバリューチェーンとして列挙
3. 各コンポーネントの**依存関係**を矢印で表現
4. 各コンポーネントを**進化軸**（Genesis → Custom → Product → Commodity）に配置

### 進化の4段階

| 段階 | 特徴 | 投資方針 |
|------|------|---------|
| **Genesis** | 新しい、不確実、実験的 | 探索的投資、失敗を許容 |
| **Custom Built** | 特定ニーズ向け、差別化源泉 | 積極投資、インハウス開発 |
| **Product (+Rental)** | 標準化が進む、競合製品あり | 選択的投資 |
| **Commodity (+Utility)** | 標準化完了、差別化不可 | 最小投資、SaaS/OSS活用 |

### 気候変動力（Climatic Forces）

- **すべてのコンポーネントは進化する**: 今日のCustom Builtは明日のCommodity
- **共進化（Coevolution）**: 1つのコンポーネントの進化が他のコンポーネントの進化を促す
- **過去の成功がInertia（慣性）を生む**: 成功体験が変化への抵抗を生む
- **変化は線形ではない**: 突然の進化が起こりうる

### 戦略的意思決定

| 決定タイプ | 説明 | 例 |
|-----------|------|-----|
| **Accelerator** | 進化を加速する決断 | OSS採用、標準化推進 |
| **De-accelerator** | 進化を遅延させる決断 | ベンダーロックイン、独自規格 |
| **Market Play** | 市場での競争戦略 | コモディティ化の先取り |

---

## 2. Big Picture EventStorming

ドメイン全体をドメインイベントのタイムラインとしてマッピングする協調的ワークショップ。

### 記法

| 要素 | 色 | 用途 |
|------|-----|------|
| **Domain Event** | 🟧 オレンジ | 「〜された」（過去形）で表現される出来事 |
| **Role/Persona** | 🟨 小さな黄色 | 顧客、ライダー、エージェント等 |
| **System** | 🩷 薄ピンク（大） | OMS、外部決済システム等 |
| **Hot Spot** | 🔴 ダークピンク（回転） | 問題、議論が必要な箇所 |

### ドメインイベントの種類

- **ユーザーのプロダクト操作**: `レビューが投稿された`
- **ユーザーの生活上の行動**: `引越しを考えた`
- **組織内のアクション**: `請求が承認された`
- **ソフトウェアの自動処理**: `ドライバーが選択された`

### ワークショップの進行

```
Step 1: Chaotic Exploration（混沌の探索）
  → 参加者全員がドメインイベントを自由に貼り出す
  → 精度より網羅性を重視

Step 2: Timeline Building（タイムラインの構築）
  → 左から右へ時系列で配置
  → ハッピーパスを主軸に、エッジケースは下に分岐

Step 3: Timeline Sorting（タイムラインの整理）
  → 重複を統合、順序を調整
  → 抜けているイベントを補完

Step 4: Timeline Walk-through（ウォークスルー）
  → 全員で左から右へストーリーを辿る
  → 質問・問題をHot Spotとして記録

Step 5: Problems & Opportunities（問題と機会の発見）
  → Hot Spotを分類・優先順位付け
  → アクションアイテムを決定
```

### ファシリテーターのヒント

| チャレンジ | 対策 |
|-----------|------|
| 参加者が書かない | まず自分が書いて見せる。「正解」は不要と強調 |
| 粒度がバラバラ | 原則を共有するが、厳密に揃えようとしない |
| 議論が発散する | Hot Spotに記録して後で議論。タイムラインに戻す |
| 技術的すぎる | 「ユーザーの視点で」を繰り返す |
| ハッピーパスだけ | 「何がうまくいかない時は？」を積極的に質問 |

---

## 3. Process Modeling EventStorming

Big Pictureより詳細な粒度でビジネスプロセスをモデリングする。

### 追加記法

| 要素 | 色 | 用途 |
|------|-----|------|
| **Command** | 🔵 青 | ユーザーやシステムの意図的な行動 |
| **Actor** | 🟨 黄色 | コマンドを発行する人 |
| **Read Model** | 🟢 緑 | 判断に使う情報（UI画面、レポート等） |
| **Policy** | 🟣 紫 | 「〜されたら〜する」の自動ルール |
| **External System** | 🩷 ピンク（大） | 外部システム |

### Big Picture vs Process Modeling

| 観点 | Big Picture | Process Modeling |
|------|-------------|-----------------|
| スコープ | ビジネス全体 | 特定のプロセス/サブドメイン |
| 参加者 | 幅広いステークホルダー | プロセスの関係者 |
| 粒度 | 高レベル | 詳細 |
| 目的 | 全体像の理解、問題発見 | プロセスの最適化、システム設計 |
| 所要時間 | 1-2日 | 2-4時間/セッション |

---

## 4. Domain Storytelling

ドメインの専門家がビジネスプロセスを「物語」として語り、それを図式化する手法。

### 記法

- **Actor（役者）**: プロセスに関わる人やシステム（アイコンで表現）
- **Work Object（作業対象）**: 操作される情報や物（ドキュメント、注文等）
- **Activity（活動）**: ActorがWork Objectに対して行うこと（番号付き矢印）
- **Annotation**: 補足情報

### 進行方法

1. ドメイン専門家が **1つのシナリオ** を語る
2. ファシリテーターがリアルタイムで図式化
3. 参加者全員で確認・修正
4. 別のシナリオを繰り返す（ハッピーパス → エッジケース）

### EventStorming vs Domain Storytelling

| 観点 | EventStorming | Domain Storytelling |
|------|--------------|-------------------|
| アプローチ | ボトムアップ（イベントから） | トップダウン（ストーリーから） |
| 参加形態 | 全員が同時に書く | 1人が語り、1人が描く |
| 表現形式 | タイムラインのイベント | 番号付きの活動フロー |
| 強み | 網羅性、隠れた複雑さの発見 | 理解しやすさ、初心者に優しい |
| 適用場面 | ドメイン全体の探索 | 特定プロセスの深い理解 |

---

## 5. プロダクト要件の特定

モダナイゼーション時のドメイン要件発見のガイドライン:

### やるべきこと

| アクション | 説明 |
|-----------|------|
| **適切な人を巻き込む** | ドメインエキスパート、エンドユーザー、サポート |
| **モダナイズしないコストを特定** | 現状維持のビジネスコストを定量化 |
| **実ユーザーと時間を過ごす** | ユーザーの実際の行動を観察 |
| **Continuous Discovery** | 継続的にユーザーニーズを発見 |
| **Shadow ITを探す** | 非公式に使われているツールや回避策 |
| **「ずっとそうだった」を疑う** | 慣習を当然とせず根本から見直す |

### やってはいけないこと

| アンチパターン | リスク |
|--------------|--------|
| **コードを無思慮に逆引きする** | レガシーの問題を新システムに持ち込む |
| **技術だけに焦点を当てる** | ドメインの本質的な問題を見逃す |
| **既存の機能をそのまま再実装** | 不要な機能まで移植してしまう |
