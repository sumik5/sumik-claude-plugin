# データビジュアライゼーション デザイン原則

データを正確・誠実に伝えるための10原則とアンチパターン集。

---

## 1. プロポーショナルインクの原則

**原則**: 視覚要素（バー・円・面積）の大きさ（インク量）は、表現するデータ値に正比例させる。

### ルール

| グラフ種別 | 起点ルール | 理由 |
|---|---|---|
| 棒グラフ | 必ず0から始める | バーの「長さ」が値を表すため |
| 折れ線グラフ | 0始点は不要 | 「位置」と「変化量」が主情報 |
| 対数軸グラフ | 任意の値を起点にできる | 比率（乗法的関係）を表現するため |
| 円グラフ・ツリーマップ | — | 角度・面積がそのまま値に比例 |

- 棒グラフで0以外を起点にすると、差異が実際より大きく見える
- 変化量や差分を示したい場合は差分を直接プロットするか、基準値からの変化率グラフを使う
- 対数軸では「乗法的差異」が均等に表現される（GDP比較などに有効）

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| 棒グラフのy軸を中間値から始める | 高さの比率がデータ比率と不一致 | y軸を0から始める |
| 対数軸で棒グラフを使う | 対数軸ではバーの高さが意味をなさない | 散布図や折れ線グラフを使う |
| 面積グラフで0ベースラインを省略 | 面積が表す量と視覚的大きさがズレる | 必ずベースラインを0に設定 |

---

## 2. 重なり合った点の扱い方

**原則**: オーバープロット（点の重なり）はデータ密度の情報を隠すため、データ量に応じた手法で対処する。

### 手法と適用基準

| データ量 | 推奨手法 | 注意点 |
|---|---|---|
| 少量（〜200点） | 半透明化（alpha調整） | 重なりが色の濃さで見える |
| 少〜中量 | ジッタリング | カテゴリ軸の場合に特に有効 |
| 中〜大量（数千点） | 2次元ヒストグラム（矩形/六角形） | ビン幅の選択が重要 |
| 大量・連続データ | 等値線図（contour plot） | グループ間比較に適する |

### ルール

- ジッターの量は「元のデータパターンを歪めない」範囲に留める
- 等値線図を複数グループに重ねる場合は、グループ数が増えすぎると重なりで読めなくなる → ファセット（パネル分割）に切り替える
- 六角形ビンは矩形ビンより視覚的に均一なため、大規模データに適する

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| ジッターを過剰に加える | 実際のデータ分布から乖離する | 小さいジッターに抑えるか2D-histに切り替える |
| 複数グループの等値線を色なしで重ねる | グループ判別不能 | 色分け＋スモールマルチプルを使う |

---

## 3. 色の落とし穴回避

**原則**: 色は意味を持つときだけ使い、知覚的に均一で色覚異常者にも安全なスケールを選ぶ。

### カラースケール選択ガイド

| データ種別 | 推奨スケール | 避けるべきスケール |
|---|---|---|
| 連続量（単方向） | Viridis, inferno, Heat | レインボー（rainbow） |
| 発散データ（中央が意味を持つ） | PiYG, RdBu | 単方向カラースケール |
| カテゴリ（質的変数） | Okabe-Ito 8色パレット | 50色以上の全色使用 |

### 色覚異常への対応

| 色覚型 | 影響 | 対策 |
|---|---|---|
| 2型3色覚（deuteranomaly/deuteranopia） | 赤緑の区別が困難 | ピンク＋黄緑（PiYG）を使用 |
| 1型3色覚（protanomaly/protanopia） | 同上 | Okabe-Itoパレット推奨 |
| 3型3色覚（tritanomaly/tritanopia） | 青黄の区別が困難 | 赤＋青の対比を避ける |

- **Okabe-Ito推奨色**（16進数）: `#E69F00` `#56B4E9` `#009E73` `#F0E442` `#0072B2` `#D55E00` `#CC79A7` `#000000`
- CVDシミュレーターで確認する習慣をつける
- 視覚要素が小さい（細線・小点）ほど色判別が難しくなる → サイズも十分に確保する

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| レインボーカラースケールを連続データに使う | 知覚的に非単調・任意の値を誇張する | Viridisなどの知覚的均一スケール |
| 全カテゴリに異なる色を割り当てる（>8色） | 凡例との照合が困難 | グループ化して代表色にする |
| 赤と緑を対比に使う | 赤緑色覚異常で判別不能 | ピンクと黄緑（PiYG）に置き換える |

---

## 4. 表現の冗長化

**原則**: 重要な情報は複数の視覚チャネル（色＋形＋テキスト）で同時に表現し、色覚異常・モノクロ印刷への対応と理解のしやすさを両立する。

### 冗長化の設計パターン

| 表現目的 | 単一チャネル | 冗長化後 |
|---|---|---|
| グループ区別 | 色のみ | 色＋形（マーカーシェイプ） |
| 折れ線の識別 | 色のみ | 色＋直接ラベル |
| 量の表現 | 位置のみ | 位置＋色（ヒートマップ的） |

### 凡例設計ルール

- **凡例の順序をデータの視覚的順序と一致させる**（例: 折れ線グラフでは右端の上下順に凡例を並べる）
- **直接ラベル**が使える場合は凡例を省略する（線の右端・点群の近くに名前を直接書く）
- カテゴリが多い場合は直接ラベルが有効（凡例を視線が往復する認知コストを削減）

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| 色だけでグループを区別する | 色覚異常・モノクロ印刷で判別不能 | 色＋形の組み合わせ |
| 凡例の順序とデータ順序が不一致 | 視線の往復が増える | 凡例をデータの並びに合わせる |
| 50カテゴリすべてに異なる色 | 照合が現実的に不可能 | グループ化＋直接ラベル |

---

## 5. マルチパネル図

**原則**: 複数パネルを持つ図では、比較可能性を確保するためにスケールと視覚言語を統一する。

### スモールマルチプル（ファセット）の設計

- **縦軸のスケールを全パネルで統一する**（自由スケールは特定のケースのみ許容）
- 自由スケールが許容される唯一のケース: 各ファセットの「傾向のパターン」だけを見せたい場合（ただし、値の比較が誤解を招く恐れに注意）
- 行・列のファセット構造は、変数の組み合わせ比較に適する

### 複合図の設計

| 観点 | 推奨事項 |
|---|---|
| 視覚言語の一貫性 | 同じグループには全パネルで同じ色・形を使う |
| パネルラベル | 小文字アルファベット（a, b, c）を一貫して使用 |
| パネルの整列 | ずれた配置は見栄えが悪い → グリッドに揃える |

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| ファセット間でy軸スケールを変える | パネル間の量的比較が不可能になる | スケールを統一する |
| パネルごとに異なる配色・形を使う | 図が持つ視覚言語が崩壊する | 一貫した視覚言語を設計する |
| パネルがずれて並んでいる | 視覚的に不整然 | レイアウトグリッドに揃える |

---

## 6. タイトル、キャプション、表

**原則**: タイトル・軸ラベル・キャプションはそれぞれ役割が異なり、図の使用文脈に合わせて設計する。

### 図の使用文脈とタイトル設計

| 使用文脈 | タイトル位置 | キャプション |
|---|---|---|
| 論文・書籍（通し番号あり） | 図の外にキャプションとして配置 | 「図X. 〇〇。データソース: 〇〇。」 |
| Web・SNS投稿（単独使用） | 図の内部にタイトルを埋め込む | 不要（タイトル＋サブタイトルで完結） |

### 軸ラベルのルール

- **明らかなコンテキストがある場合は省略可能**（例: 2013, 2014... の数列は「年」と自明）
- **値が何を意味するか自明でない場合は必須**（例: 正規化された指数の場合はy軸タイトルが必要）
- 単位は軸ラベルに含める（`身長 (cm)` のように）
- 過剰なラベル（「years AD」など冗長な表記）は避ける

### 表の設計ルール

- 縦線は使わない
- データ行間の横線は使わない（ヘッダー下のみ横線）
- 数値列は右揃え
- データ列は左揃え（または中央揃えは避ける）
- 交互行の色分けは控えめな差に留める

---

## 7. データとコンテキストのバランス

**原則**: データを強調するために不要な装飾を取り除くが、過剰な削除はコンテキスト喪失を招く。

### データインク比（Tufte）の適用

| 要素 | 推奨 |
|---|---|
| グリッドライン | ライトグレーで控えめに |
| 軸線 | 必要に応じて省略可能 |
| 枠線 | プロットパネル周りの枠線は状況次第 |
| 凡例の枠 | 省略を推奨 |

### 背景グリッドの設計

| グラフの向き | 適切なグリッドライン |
|---|---|
| 縦棒グラフ | 水平グリッド線 |
| 横棒グラフ | 垂直グリッド線 |
| 散布図 | 水平・垂直どちらも可（軽めに） |
| 折れ線グラフ | 水平グリッド線（比較基準が必要な場合） |

- **基準線**（例: y=100の参照線）は、データが基準値からの乖離を示す場合に有効
- グリッドがデータより目立つと、データへの視線誘導が妨げられる
- 逆にグリッドを完全に省くと、データポイントが浮遊して見える

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| 太い黒グリッドライン | データより目立つ | ライトグレー（#D0D0D0相当）に変更 |
| 軸ラベルを薄くしすぎる | ほとんど読めなくなる | コントラスト比4.5:1以上を確保 |
| 不要な枠線を多重に使う | 視覚的ノイズが増える | 必要最小限の枠線のみ残す |

---

## 8. 軸ラベルのフォントサイズ

**原則**: 図のすべてのテキスト要素は、図が表示される最終サイズで読める大きさに設定する。

### フォントサイズのバランスルール

- 図全体を縮小して使う予定がある場合（サムネイル、2カラムレイアウト等）は、元データの2〜3倍のサイズで作成する
- テキスト要素（軸ラベル・タイトル・凡例）とデータポイントのサイズ比率のバランスを保つ
- テキストが大きすぎてデータポイントが目立たないのも問題

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| デフォルトの小さいフォントサイズのまま公開 | 印刷・表示時に読めない | 最終表示サイズでプレビューして確認 |
| テキストのみ拡大してマーカーが豆粒になる | 図全体のバランスが崩れる | テキストとマーカーサイズを比例調整 |

---

## 9. 線画を避ける（塗りつぶしを使う）

**原則**: ヒストグラム・密度プロット・棒グラフは、線画（アウトラインのみ）ではなく塗りつぶしで描く。

### 塗りつぶし vs 線画の使い分け

| 状況 | 推奨 |
|---|---|
| ヒストグラム | 塗りつぶし（単色） |
| 密度曲線（複数グループ） | 半透明の塗りつぶし＋色分け |
| 散布図（複数グループ） | 塗りつぶしシェイプ＋色分け |
| 箱ひげ図 | 箱を薄い色で塗りつぶす |

### ルール

- 複数グループの密度曲線には半透明（alpha 0.3〜0.5程度）の塗りつぶしが有効
- open circle（白抜き丸）などの「線で描かれたシェイプ」は視覚ノイズが多い → 塗りつぶしシェイプを使う
- 破線スタイルは「曲線の下の領域」が上下でつながっているという誤知覚を招く

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| ヒストグラムのバーをアウトラインのみで描く | どこがバーの内側か判別困難 | 単色で塗りつぶす |
| open circle/open squareをマーカーに使う | 視覚ノイズが多く見づらい | 塗りつぶしシェイプ＋色分け |
| 密度曲線を破線で描く | 曲線上下の領域知覚が弱まる | 実線＋塗りつぶし領域 |

---

## 10. 3Dを使わない

**原則**: データが3次元空間に存在しない限り、3D表現は視覚的歪みと読み間違いを生むため使わない。

### 3D使用が問題になる理由

| 問題 | 説明 |
|---|---|
| 透視歪み | 手前の要素が実際より大きく、奥の要素が小さく見える |
| 隠れ面問題 | 奥のバー・点が手前の要素に隠される |
| 視点依存性 | 同じデータでも視点が変わると異なる印象になる |
| 値の読み取り困難 | 3D空間での位置から正確な値を読み取れない |

### 3Dが適切なケース（例外）

- 地形・地表データ（高度マップ）
- 分子構造・タンパク質の3D可視化
- VR/ARインタラクティブ環境での探索的可視化

### 3Dグラフの2D代替案

| 3D表現 | 2D代替案 |
|---|---|
| 3D棒グラフ | スモールマルチプルの2D棒グラフ |
| 3D円グラフ | 2D円グラフ or 棒グラフ |
| 3D散布図（x, y, z） | 2Dパネル2つ（a: x vs y、b: x vs z）+ 3変数目はサイズ・色 |

### アンチパターン

| やってはいけないこと | 問題 | 代替案 |
|---|---|---|
| データが2Dなのに3D棒グラフを使う | 値の比較が著しく困難になる | 2D棒グラフに変更 |
| 3D円グラフで手前の扇を「強調」する | 手前の扇が実際より大きく見える | 2D円グラフ + 色強調 |
| 3D散布図を静止画で表示 | 視点固定で情報が失われる | 2Dパネル組み合わせ |
