# SD-WAN: AI最適化・セキュリティ・災害復旧

## Ch23: SD-WAN最適化

### SD-WANアーキテクチャ

SD-WANはコントロールプレーンとデータプレーンを分離し、集中型オーケストレーションと動的トラフィック管理を実現する。主要コンポーネント:

| コンポーネント | 役割 |
|-------------|------|
| **vEdge（Edge Device）** | ブランチ/クラウドエッジに配置。トラフィック転送・ポリシー適用・暗号化・テレメトリ収集 |
| **Controller（集中型コントローラ）** | ポリシー定義・ネットワーク健全性監視・設定オーケストレーション。グローバルトポロジーを把握 |
| **Orchestrator** | プロビジョニング・監視・管理UIを提供。マルチサイト/多様なトランスポートリンクの複雑さを簡素化 |
| **Analytics** | テレメトリデータの集約・分析・可視化。AI最適化のデータ基盤 |

**Transport Links**: MPLS、ブロードバンド、LTE/5G、衛星など複数WAN接続をインテリジェントに集約。

### メリットと管理課題

**メリット**: コスト最適化（高コストMPLS削減）、アプリケーション性能向上（インテリジェントパス選択）、集中管理による簡素化、俊敏性・スケーラビリティ、組込みセキュリティ、改善された信頼性。

**課題**: リンク品質の不均質性、動的ネットワーク状態への継続的適応、複雑なポリシー管理、セキュリティリスク（攻撃面の拡大）、レガシーインフラとのIntegration複雑性、テレメトリデータの大量処理。

### AI最適化技術

| AI技術 | 適用分野 | 主要手法 | 効果 | 課題 |
|-------|---------|---------|------|------|
| **MLトラフィック分類** | トラフィック分類・予測・異常検知 | 決定木、SVM、Random Forest、LSTM、ARIMA | 先行リソース割当・輻輳回避 | 高品質データ・継続的モデル再訓練が必要 |
| **RLパス選択/負荷分散** | 動的パス選択・ロードバランシング | Deep RL、Multi-agent RL、シミュレーション環境での事前訓練 | 適応型ルーティング・自己学習ポリシー | 探索-活用トレードオフ・訓練コスト |
| **最適化アルゴリズム** | 帯域割当・リソース最適化 | 遺伝的アルゴリズム、焼きなまし法、勾配降下法、線形/非線形計画法 | 効率的リソース利用・多目的最適化 | 計算複雑度・収束問題 |
| **NLPインテントポリシー** | ポリシー解釈・設定生成 | 意味解析、固有表現認識、対話システム | 設定の簡素化・誤設定削減 | 言語的曖昧性・ドメイン特化理解 |
| **AI障害検知・自己修復** | 障害予測・根本原因分析・自動回復 | クラスタリング、オートエンコーダ、因果推論 | 早期障害検知・MTTR削減 | 偽陽性・大量テレメトリ要件 |

**RL訓練環境**: Digital Twins、Mininet、NS3、GNS3などのネットワークエミュレータで安全に訓練後に本番適用。

### パフォーマンスメトリクスと評価手法

**主要メトリクス**: レイテンシ、パケットロス率、スループット、ジッター、リンク利用率、コスト効率、アプリケーション性能（ページロード時間・トランザクション完了率）、適応速度、可用性。

**評価手法**:
- **シミュレーション/エミュレーション**: ns-3、Mininet、GNS3で制御環境テスト
- **テストベッドデプロイ**: 本番近似環境での検証
- **ベースライン比較**: 従来静的ルーティングとのA/Bテスト
- **縦断的監視**: 継続テレメトリ収集でモデル再訓練を指示
- **可視化・説明可能AI（XAI）**: ダッシュボード・インタラクティブ分析でオペレーター信頼性向上

### ケーススタディ要約

200以上のブランチを持つ多国籍企業がRL/MLベースのAIエージェントをSD-WANコントローラに統合:
- 平均レイテンシ25%削減（音声・ビデオ品質向上）
- MLによる帯域予測でピーク時パケットロス最小化
- 異常検知によりダウンタイム40%削減
- NLPインターフェースでポリシー更新を加速
- ブロードバンドリンク最適化でWANコスト30%削減

---

## Ch24: SD-WANセキュリティ

### セキュリティ課題

| 課題 | 内容 |
|-----|------|
| **攻撃面拡大** | 公衆インターネット・セルラーネットワーク利用で中間者攻撃・不正アクセスリスク増大 |
| **エッジ脆弱性** | ブランチのエッジデバイスは物理セキュリティが低く、遠隔管理で改ざん・設定ミスリスク |
| **ポリシー複雑化** | 分散環境での一貫したポリシー適用・監査が困難。設定ミスが攻撃ベクターになりうる |
| **暗号化トラフィック検査** | 暗号化がデータ機密性を守る一方、従来の検査ツールを無効化し脅威検知を困難にする |
| **内部脅威・横移動** | 侵害されたユーザー/デバイスがSD-WAN網内を横移動し権限昇格・データ漏洩を引き起こす |
| **クラウド統合リスク** | マルチクラウドプロバイダーとの統合によりサプライチェーンリスクと監視複雑性が増大 |

### AI解決策

**異常検知・行動分析**: 非教師あり学習（クラスタリング・オートエンコーダ）でベースライン行動を確立。ユーザー・デバイス・トラフィックの逸脱を継続的に検知（例: 業務時間外の大量アップロード→データ漏洩検知）。

**脅威インテリジェンス統合**: グローバル脅威インテリジェンスフィードのリアルタイム取り込みとローカルデータとの相関分析。コンテキスト評価で誤検知を削減。

**自動インシデント対応**:
- 疑わしいデバイス/フローの隔離（トラフィック検疫）
- リアルタイムでのファイアウォールルール・アクセス制御の動的調整
- フォレンジックデータ収集（事後分析用）
- 侵害サービスの自己修復・影響リンクからのトラフィック再ルーティング

**暗号化・鍵管理自動化**: 証明書発行・更新・失効・鍵ローテーションの自動化。リスクベース優先度付けと不正な証明書使用の異常検知。人的ミスによる設定誤りを最小化。

**DPI・暗号化トラフィック分析**: メタデータ・パケットサイズ・フロー特性・タイミングの統計的分析でコンテンツ復号なしに脅威を検知。トラフィックフィンガープリンティングとサイドチャネル分析を組み合わせてプライバシーを保持しつつセキュリティ可視性を確保。

**内部脅威検知・アクセス制御**: UEBA（User and Entity Behavior Analytics）で権限昇格・異常なリソースアクセスを検知。最小権限原則に基づくリスク評価に応じた動的アクセスポリシー。

### SOAR統合

**SOAR（Security Orchestration, Automation, and Response）** との統合でSD-WANセキュリティをエンタープライズ全体の多層防御に組み込む:
- **自動プレイブック**: AI検知でトリガーされる標準化された対応ワークフロー
- **クロスドメイン相関**: SD-WANデータとエンドポイント・クラウド・SIEMを組み合わせた包括的脅威管理

### ケーススタディ

| 業界 | 施策 | 成果 |
|-----|-----|------|
| **金融（150+拠点）** | 行動分析による内部脅威検知・AIによる動的ファイアウォール調整 | 早期介入・設定誤り削減・規制コンプライアンス自動化 |
| **医療（病院・クリニック連携）** | 暗号化トラフィック分析によるマルウェア検知・自動インシデント対応 | プライバシー規制準拠の脅威検知・MTTR削減・継続的暗号化保証 |
| **小売（数千店舗）** | 脅威インテリジェンス相関・自己修復機能 | 日次数百万脅威シグナルを処理・MTTR 50%削減・集中型AI管理 |

---

## Ch25: AI駆動災害復旧

### DR計画の要素

効果的な災害復旧（DR）計画の基盤となる4要素:

1. **リスク評価・ビジネスインパクト分析（BIA）**: サイバー攻撃・ハードウェア障害・環境災害などの潜在的脅威を特定。**RTO**（最大許容ダウンタイム）と**RPO**（最大許容データ損失時間）を定義し復旧優先度を決定。

2. **復旧戦略の定義**: オンプレミスバックアップ・セカンダリデータセンター・クラウドDRaaS（Disaster Recovery as a Service）のコスト・複雑性・復旧速度トレードオフを評価して選択。

3. **文書化・手順**: 詳細な復旧プレイブック（役割・責任・エスカレーションパス）と社内外への明確なコミュニケーションプロトコルを整備。

4. **テスト・継続的改善**: シミュレーション・ドリルによるDRプランの定期的バリデーション。弱点発見と改善点のプランへの組み込みで変化する技術・脅威に対応。

### AI技術

| AI技術 | 機能 | ビジネスインパクト |
|-------|-----|---------------|
| **予測分析** | 履歴データ・ログ・リアルタイムテレメトリから障害や脅威を予測し事前対策を実施 | 計画外ダウンタイムを最小化 |
| **自動復旧オーケストレーション** | フェイルオーバー・データ復元・ネットワーク再設定などの複雑な復旧ワークフローを自動実行 | 復旧時間の短縮・人的ミス削減 |
| **動的リソース割当** | 復旧中にRTO/RPO目標達成に向けて計算・ストレージ・ネットワークリソースを効率的に動的配分 | コスト効果的な目標達成 |
| **異常検知** | 復旧プロセス中の異常・障害をリアルタイム監視し自動修正アクションをトリガー | プロセス整合性の維持 |
| **インテリジェントテスト** | 多様な災害シナリオをシミュレートし、システム応答に基づいてテストパラメータを動的調整 | 準備体制の強化・プラン品質向上 |

### SD-WAN固有の復旧アプローチ

**マルチパスフェイルオーバー**: AIがMPLS・ブロードバンド・セルラーなど複数トランスポートパスのリンク品質を継続監視し、障害や性能劣化リンクを迂回して即座にトラフィックを再ルーティング。

**エッジデバイス状態保存**: 分散エッジデバイスの設定・セッション状態をAIが自動バックアップ・リストア。一貫したネットワーク動作を維持し設定ドリフトを防止。

**クラウド統合復旧**: SD-WANのクラウド接続性を活用し、オンプレミスインフラ障害時にクラウドホストアプリケーション・データストアへのフェイルオーバーをAIがオーケストレート。

**セキュリティアウェア復旧**: 復旧アクション全体でセキュリティポリシーへの準拠を確保し、フェイルオーバー・リストア時の脆弱性を悪用しようとする脅威を継続監視。

### ベストプラクティスと実例

| 組織 | 取り組み | 成果 |
|-----|---------|------|
| **製造業（グローバル）** | 予測分析でハードウェア障害を予測、自動フェイルオーバー起動 | 生産ダウンタイム60%削減・復旧中リソース利用最適化 |
| **金融機関** | 複数データセンター・クラウド環境にわたる復旧ワークフローの自動化 | 厳格なRTO/RPO目標達成・設定不整合の発見・復旧時間短縮 |
| **医療ネットワーク** | SD-WAN連携病院でAI主導の災害シナリオシミュレーション | 復旧ドリルの現実性向上・リアルタイム偏差修正・患者ケアの継続性確保 |

**ベストプラクティス**:
- RTO/RPOに基づく優先度付きリスク評価を定期的に更新
- AIによる予測テストでDRプランをインフラ変化に追従させる
- 復旧中もセキュリティポリシー遵守を自動的に維持
- クロスドメイン（SD-WAN・クラウド・エンドポイント）の統合監視で包括的な復旧可視性を確保
