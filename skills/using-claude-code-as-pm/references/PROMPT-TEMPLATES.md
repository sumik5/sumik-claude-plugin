# PMプロンプトテンプレート集

コピー＆アダプトして使えるPM業務用プロンプト。`[括弧]` 内はユーザー入力。

---

## 調査プロンプト

plan mode (`--permission-mode plan`) で使用。

### アーキテクチャ概要

```
このコードベースのアーキテクチャをプロダクトマネージャー向けに説明してください:
- 主要コンポーネントとそれぞれの責務
- データがシステムをどう流れるか
- 主要な抽象化やパターン
- ビジネスロジックがどこに配置されているか

実装詳細は省略し、概念的な説明に集中してください。
```

### 機能実装調査

```
[機能名] はこのアプリケーションでどう動きますか？

- 何がトリガーになるか（ユーザー操作、スケジュールジョブ、外部イベント）
- どのデータを読み書きするか
- どの外部サービスを呼び出すか
- 成功パスと失敗パスは何か

プロダクト用語で説明してください。
```

### 重要ファイル特定

```
[機能] を理解するために知っておくべき最も重要な5つのファイルは？
各ファイルについて、何を担当しているか、なぜ重要かを説明してください。
```

### データアクセス調査

```
[機能] がアクセスするユーザーデータは何ですか？
- どのDBテーブルまたはAPIエンドポイントから読み取るか
- どのフィールドを使用するか
- 書き込みはあるか
```

### エッジケース調査

```
[プロセス] 中に [条件] が発生した場合、何が起きますか？
コードパス、エラーハンドリング、ユーザー向け動作を説明してください。
```

### 動作説明

```
ユーザーから [観察された動作] との報告がありました。
なぜこれが起きますか？意図的な動作かバグか？
```

### 症状の技術翻訳

```
ユーザー報告: "[正確な苦情をペースト]"

技術的な用語に翻訳してください。
関係しうるコンポーネントは？最初に調査すべき箇所は？
```

### コード領域特定

```
ユーザー報告の問題を調査中: [1文の要約]

関連するコード領域を特定:
- エントリポイント
- 実行パス上の主要ファイル
- エラーハンドリング箇所
- 失敗しうるポイント
```

### 問題レイヤー特定

```
ユーザーが [症状] を経験。以下のどれに該当するか判断:
- フロントエンド（UI、クライアントサイド状態、ブラウザ）
- バックエンド（API、サーバーロジック、処理）
- データ（DB、キャッシュ、データ整合性）
- 連携（外部サービス、外部API）
- インフラ（ネットワーク、ホスティング、設定）

根拠を説明してください。
```

### 設定調査

```
[機能] を制御する設定は？
フィーチャーフラグ、環境変数、動作に影響する設定を表示。
```

### アクセス制御調査

```
[機能] の権限チェックはどう行われる？
アクセスが検証される箇所と、必要なロールや条件を表示。
```

---

## 生成プロンプト

acceptEdits mode でファイル作成時に使用。

### ユーザーストーリー生成

```
[機能名] のユーザーストーリーを docs/user-stories/[feature-name].md に生成。

各ストーリーに含める:
- ユーザーストーリー（As a... I want... So that...）
- 受入基準（Given/When/Then）
- エッジケースとエラー状態
- 他機能への依存関係

コードベースの技術的制約を参照してください。
```

### PRD生成

```
[機能名] のPRDを docs/prds/[feature-name].md に作成。

含める: 問題定義、成功指標、ユーザーストーリー、
スコープ（In/Out）、技術的考慮事項、オープンクエスチョン。

コードベースの既存実装パターンを参照。
```

### ペルソナ生成

```
[リサーチフォルダ] のリサーチ資料に基づき、
docs/personas/ にペルソナドキュメントを作成。

各ユーザータイプについて: 名前、役割、目標、
不満、主要行動パターン、リサーチからの引用。
```

### チェンジログ生成

```
[前バージョンタグ] 以降のgitコミットをレビューし、
バージョン [X.Y.Z] のチェンジログエントリを生成。

外部ユーザー向け: 実装ではなくベネフィットに集中。
グループ: 新機能、改善、バグ修正
```

### README更新

```
README.md をレビューし、最近の変更を反映して更新。
Getting Started手順、機能リスト、例が
現在の動作と一致していることを確認。
```

### バグレポート生成

```
調査結果に基づきバグレポートを生成:
- サマリー（1文）
- 再現手順
- 期待 vs 実際の動作
- 関連コード領域（ファイル、関数）
- 根本原因の仮説
- エンジニア向け推奨調査パス
```

### 調査サマリー（エンジニアハンドオフ）

```
このバグのエンジニアハンドオフ用に調査を要約:
- ユーザー報告の内容
- 調査した内容
- レビューしたファイル・コード領域
- 根本原因の仮説
- エンジニアへの具体的な質問
- 推奨される次のステップ
```

---

## 分析プロンプト

分析・インサイト生成用。

### テーマ特定

```
[フィードバックフォルダ] のフィードバックを全件読み、
繰り返し出現するトップ10-15テーマを特定。

各テーマ: 名称、説明、出現頻度、代表的引用（3-5件）。
```

### フィードバック分類

```
[フィードバックフォルダ] のフィードバックを分類:
[カテゴリ1], [カテゴリ2], [カテゴリ3], [その他]

カテゴリ別件数、センチメント内訳、注目パターンの要約。
```

### インタビュー分析

```
[インタビューフォルダ] のインタビュー書起こしを読み、
横断的パターンを分析。

特定: 共通ペインポイント、未充足ニーズ、
ユーザーの回避策、感情的反応、機能リクエスト。
```

### インサイト→アクションマッピング

```
[レポートファイル] のテーマレポートをレビューし、
各テーマをプロダクトアクションにマッピング。

各テーマ: Quick Win、大規模イニシアティブ、モニタリング対象。
```

### 競合プロファイル

```
[競合名] をWebサーチで調査し、
research/competitors/[competitor-name].md にプロファイル作成。

含める: 企業概要、ターゲット市場、主要機能、
価格モデル、ポジショニング、強み、弱み、最近のニュース。
```

### 比較マトリクス

```
research/competitors/ のプロファイルに基づき、
research/competitors/competitive-matrix.md に比較マトリクス作成。

比較: ターゲット層、価格、主要機能、
インテグレーション、差別化要因。
```

### 価格分析

```
[競合名] の価格を調査し、
research/pricing/[competitor-name]-pricing.md に作成。

含める: 課金モデル、ティア構造、機能ゲート、
公開価格、割引パターン。
```

### 市場規模推定

```
[プロダクト/カテゴリ] の市場規模をTAM/SAM/SOMで推定。
research/market-sizing/market-size.md を作成。

各レベル: 方法論、データソース、前提条件、計算、信頼度。
```

### PRD監査

```
[PRDファイル] の完全性をレビュー:
- 明確な問題定義とエビデンス
- 測定可能な成功指標
- 受入基準付きユーザーストーリー
- 明示的スコープ境界
- 技術的考慮事項
- 依存関係
- オープンクエスチョン

ギャップを指摘し改善案を提案。
```

### ドキュメント監査

```
docs/ のドキュメントとコードベースを比較:
- 古くなった情報
- 未ドキュメントの実装済み機能
- 誤った例・コードスニペット
- 壊れた内部参照
```

### ペルソナ検証

```
docs/personas/ のペルソナを [リサーチフォルダ] の
ソースリサーチと照合。

各ペルソナについて: 主張がリサーチで裏付けられているか、
引用が正確か、捏造された詳細がないか検証。
```

---

## プロンプトカスタマイズガイド

### より具体的にする

- 「ユーザー体験に集中し、内部実装は省略」
- 「500語以内で」
- 「テーブル形式で見やすく」
- 「コード参照にはファイルパスを含めて」

### より徹底的にする

- 「分析結果を [ファイルパス] に保存」
- 「冒頭にサマリーセクションを含めて」
- 「前提条件を明示的にリスト」
- 「各発見に対する確信度を記載」

### プロンプトの連鎖

1. 調査プロンプトでコンテキスト収集
2. `/compact` で発見事項を要約
3. 生成プロンプトで成果物作成
