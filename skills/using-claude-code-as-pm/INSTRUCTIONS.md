# PM向けClaude Code活用ガイド

## 概要

PMがClaude Codeを活用するための体系的ガイド。コードベース調査、バグトリアージ、競合分析、フィードバック分析、要件定義、ドキュメント生成など、PM業務全般でClaude Codeを効果的に使うためのワークフローとプロンプトテンプレートを提供。

**重要な前提**: PMはコードを読む必要はない。Claude Codeに自然言語で質問し、プロダクト言語で回答を得る。調査結果は「仮説」であり「結論」ではない。エンジニアリングへの確認が常に必要。

**リファレンスファイル一覧:**
- `references/INVESTIGATION-PATTERNS.md`: コードベース調査・バグトリアージ
- `references/RESEARCH-SYNTHESIS.md`: 市場分析・フィードバック分析
- `references/REQUIREMENTS-DOCS.md`: ペルソナ・PRD・ユーザーストーリー
- `references/ADVANCED-WORKFLOWS.md`: スキル設計・MCP・Subagent・エンジニア協業
- `references/PROMPT-TEMPLATES.md`: PMプロンプトテンプレート集

---

## ツール選択マトリクス

Claude Code vs Claude.ai の使い分け判断基準:

| 条件 | Claude Code | Claude.ai |
|------|------------|-----------|
| ファイル操作・リポジトリ内作業 | ✓ | |
| 反復的なワークフロー | ✓ | |
| 成果物のバージョン管理 | ✓ | |
| 1回限りの質問 | | ✓ |
| ブレインストーミング・対話型探索 | | ✓ |
| プレゼン推敲・メール添削 | | ✓ |

**判断の核心**: 「このタスクはファイル読み書き、成果物生成、コマンド実行を必要とするか？」→ Yes ならClaude Code、No ならClaude.ai

---

## 5つのコア能力

Claude Codeが持つ5つの能力とPM活用例:

| 能力 | PM活用例 |
|------|---------|
| **ファイルシステム読み書き** | コードベース調査結果をMarkdownで保存、PRDをリポジトリに直接生成 |
| **シェルコマンド実行** | git log で変更履歴調査、npm/pip スクリプト実行 |
| **永続コンテキスト (CLAUDE.md)** | プロダクト用語集、主要ユーザージャーニー、チーム規約を永続化 |
| **Subagent並列処理** | 競合3社を並列調査、フィードバック500件を分割分析 |
| **MCP外部連携** | Jira/Slack/Figma/DBに直接接続、エクスポート不要 |

---

## PMセットアップ要点

### Permission Mode

- **plan mode（推奨デフォルト）**: 読み取り専用。調査・分析に最適
  - `claude --permission-mode plan`
- **acceptEdits**: ファイル生成時に使用。PRD・分析レポート等の成果物作成
- **full access**: PMは原則使用しない（コード変更はエンジニアの領域）

### コスト管理

- 典型的なPMセッション: $0.10-0.75
- コスト確認: `/cost` コマンド
- コンテキスト使い切り防止: 無関係なタスクは `/clear` で新規セッション開始

---

## PM調査の4パターン（概要）

PM質問の90%をカバーする4つの調査パターン:

| パターン | 質問例 | 得られる情報 |
|---------|--------|------------|
| **「Xはどう動く？」** | 割引コード検証はどう実装されている？ | 機能のコードパス、ビジネスルール、関連ファイル |
| **「Xはどのデータにアクセス？」** | 購入履歴機能はどのデータを使う？ | DB テーブル、API、アクセス制御 |
| **「Xが起きたら？」** | 決済が途中で失敗したらどうなる？ | エラーハンドリング、ユーザー体験、エッジケース |
| **「なぜXが起きる？」** | 検索フィルタが「もっと見る」で消えるのはなぜ？ | 意図的 vs バグ、根本原因 |

**プロンプトの要点:**
- 具体的に質問する（「認証はどう動く？」→ 広すぎ → 「ログイン済みユーザーが保護ページにアクセスする際の認証確認方法は？」）
- 「プロダクト用語で説明して」を常に含める
- ファイルパスと行番号をエンジニアへの共有用に記録

**詳細:** `references/INVESTIGATION-PATTERNS.md` 参照

---

## 5つの失敗モードと対策

| 失敗モード | 症状 | 対策 |
|-----------|------|------|
| **Spec Dumping** | 15ページのPRDを丸投げ → 浅い・汎用的な出力 | セクション単位で具体的に依頼。指示は500語以内、入力を上回る |
| **過信（Overconfidence）** | Claude Codeの分析をエンジニア確認なしに事実と扱う | 結果は「仮説」として共有。「〜のようです。確認お願いします」 |
| **コンテキスト消耗** | 30分超のセッションで回答品質低下、繰り返し | `/clear` で新規セッション。`/compact` で要点保持 |
| **ツールミスマッチ** | コードベースアクセス不要のタスクにClaude Code使用 | 「ファイル操作が必要か？」→ No なら Claude.ai |
| **スキル過剰設計** | 1回しか使わないタスクにスキル構築 | 「3回ルール」: 2回実施済み＋今後1回以上 → スキル化 |

**詳細:** `references/ADVANCED-WORKFLOWS.md` 参照

---

## CLAUDE.md設計（PM向け）

PM用CLAUDE.mdに含めるべき項目:

- **プロダクト用語集**: ドメイン固有の用語とコードベースでの対応
- **主要ユーザージャーニー → コード領域マッピング**: 「チェックアウト → src/checkout/」等
- **よく調査する領域**: 決済、認証、通知等の重要フロー
- **チーム規約**: ドキュメント配置先、ファイル命名規則
- **過去の調査で判明した事実**: 繰り返し使える知識の蓄積

---

## ユーザー確認の原則（AskUserQuestion）

**判断分岐がある場合、推測で進めず必ずAskUserQuestionツールでユーザーに確認する。**

### 確認すべき場面

- 分析スコープ（全フィードバック vs 特定セグメント）
- 成果物フォーマット（Markdown vs テーブル vs ドキュメント）
- 競合分析の対象企業選定
- ペルソナの数と粒度

### 確認不要な場面

- plan mode での調査実行（安全な読み取り操作）
- プロンプトテンプレートの適用
- ファイルパス・行番号の記録

---

## リファレンスファイル一覧

| ファイル | 内容 |
|---------|------|
| [`INVESTIGATION-PATTERNS.md`](references/INVESTIGATION-PATTERNS.md) | コードベース調査4パターン詳細、バグトリアージ5ステップ、エンジニアハンドオフ |
| [`RESEARCH-SYNTHESIS.md`](references/RESEARCH-SYNTHESIS.md) | 競合分析、価格追跡、市場規模推定、フィードバック分析、インタビュー分析 |
| [`REQUIREMENTS-DOCS.md`](references/REQUIREMENTS-DOCS.md) | ペルソナ生成、ユーザーストーリー、PRD作成・監査、ドキュメント同期 |
| [`ADVANCED-WORKFLOWS.md`](references/ADVANCED-WORKFLOWS.md) | PMスキル設計、MCP連携、Subagent活用、エンジニア協業、失敗モード詳細 |
| [`PROMPT-TEMPLATES.md`](references/PROMPT-TEMPLATES.md) | 調査・生成・分析の全プロンプトテンプレート集 |

---

## 関連スキル

- `developing-with-ai`: AI支援開発メソドロジー（エンジニア向け）
- `managing-claude-md`: CLAUDE.md管理の詳細ガイド
- `authoring-skills`: スキル作成の詳細ガイド
- `writing-effective-prose`: テクニカルドキュメント・学術文書作成の一般原則
